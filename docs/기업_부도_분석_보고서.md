# 기업 부도 분석 시스템 기술 보고서

## 문서 개요

본 보고서는 한국 기업의 부도 원인 분석을 위한 두 개의 Jupyter 노트북에 대한 종합 기술 문서입니다.

- **노트북 1**: `01_도메인_기반_부도원인_분석.ipynb` (51개 셀)
- **노트북 2**: `01_심화_재무_분석.ipynb` (28개 셀)

### 분석 대상 데이터

- **데이터 규모**: 50,105개 기업, 159개 변수
- **데이터 출처**: 기업신용평가정보 (2021년 8월 1일 기준)
- **타겟 변수**: 향후 1년 내 부도 여부
- **클래스 불균형**: 정상 기업 98.49%, 부도 기업 1.51% (1:66 비율)

---

## 1. 노트북 1: 도메인 기반 부도 원인 분석

### 1.1 분석 목적

경제 및 재무 전문가 관점에서 "왜 기업이 부도가 나는가?"라는 근본적인 질문에 답하기 위한 탐색적 데이터 분석(EDA)을 수행합니다.

### 1.2 분석 구조

```
환경 설정
   ↓
데이터 로딩 및 기본 통계
   ↓
타겟 변수 분포 확인
   ↓
주요 재무 지표 식별 및 분류
   ↓
부도 원인 3대 분석
   ├── 유동성 위기
   ├── 지급불능 (자본잠식)
   └── 수익성 악화
   ↓
한국 시장 특화 패턴 분석
   ├── 업종별 부도율
   ├── 기업 규모별 부도 패턴
   └── 외부감사 여부별 분석
   ↓
신용정보 기반 예측력 분석
   ↓
종합 리스크 스코어 생성
```

### 1.3 주요 분석 내용

#### 1.3.1 재무 지표 자동 분류 시스템

노트북은 159개의 변수를 다음 6개 카테고리로 자동 분류합니다:

```python
columns_dict = {
    '기본정보': [],      # 업종, 외감구분, 설립일자 등
    '재무상태표': [],    # 자산, 부채, 자본 관련 항목
    '손익계산서': [],    # 매출, 이익 관련 항목
    '현금흐름표': [],    # 현금흐름 관련 항목
    '재무비율': [],      # 계산된 재무 비율
    '신용정보': []       # 연체, 신용등급 등
}
```

**구현 메커니즘**:
- 키워드 기반 필터링을 통해 컬럼명에서 특정 단어 패턴을 감지
- 예: '유동자산', '비유동자산' → 재무상태표 카테고리
- 예: '매출채권', '영업이익' → 손익계산서 카테고리

**분류 결과**:
- 기본정보: 5개 변수
- 재무상태표: 35개 변수
- 손익계산서: 32개 변수
- 재무비율: 다수
- 신용정보: 다수

#### 1.3.2 유동성 위기 분석

**유동성**: 기업이 단기 부채를 현금으로 상환할 수 있는 능력

**핵심 지표**:

1. **유동비율 (Current Ratio)**
   ```
   유동비율 = 유동자산 / 유동부채
   ```
   - **의미**: 1년 이내에 현금화 가능한 자산이 1년 이내 갚아야 할 부채의 몇 배인가
   - **기준값**:
     - 2.0 이상: 안전
     - 1.0~2.0: 보통
     - 1.0 미만: 위험 (유동부채를 갚을 자산이 부족)
   - **분석 결과**:
     - 중앙값: 1.805
     - 평균: inf (일부 기업의 유동부채가 0이어서 발생)

2. **당좌비율 (Quick Ratio)**
   ```
   당좌비율 = (유동자산 - 재고자산) / 유동부채
   ```
   - **의미**: 재고를 제외한 빠르게 현금화 가능한 자산으로 단기 부채를 갚을 수 있는가
   - **재고 제외 이유**: 재고는 판매까지 시간이 걸리므로 즉각적인 현금화가 어려움
   - **분석 결과**:
     - 중앙값: 1.318

3. **현금비율 (Cash Ratio)**
   ```
   현금비율 = (현금 + 현금성자산) / 유동부채
   ```
   - **의미**: 즉시 사용 가능한 현금으로 단기 부채를 갚을 수 있는가
   - **특징**: 가장 보수적인 유동성 지표
   - **구현 세부사항**:
     ```python
     # 현금 관련 컬럼 자동 탐색
     cash_components = []
     if '현금' in df.columns:
         cash_components.append('현금')
     if '현금등가물' in df.columns:
         cash_components.append('현금등가물')
     if '현금성자산' in df.columns:
         cash_components.append('현금성자산')

     # 총 현금 계산
     df['총현금'] = df[cash_components].sum(axis=1)
     df['현금비율'] = df['총현금'] / (df['유동부채'] + 1)
     ```

**시각화 구현**:
- Plotly의 `make_subplots`를 사용하여 2x2 그리드 차트 생성
- 전체 기업 vs 현금보유 기업 분포 비교
- 부도 기업 vs 정상 기업 현금비율 박스플롯

#### 1.3.3 지급불능 (자본잠식) 분석

**자본잠식**: 누적 손실로 인해 자본이 음수가 되는 상태

```python
# 자본잠식 여부 판정
df['자본잠식'] = (df['자본총계'] < 0).astype(int)
```

**분석 결과**:
| 구분 | 정상 기업 비율 | 부도 기업 비율 |
|------|----------------|----------------|
| 자본잠식 없음 | 93.13% | 82.48% |
| 자본잠식 있음 | 6.87% | 17.52% |

**인사이트**:
- 부도 기업 중 17.52%가 자본잠식 상태
- 정상 기업의 2.5배 높은 비율

**부채비율 계산**:
```python
# 부채비율 = 부채총계 / 자본총계
# 분모가 0인 경우 방지를 위해 +1 처리
df['부채비율'] = df['부채총계'] / (df['자본총계'] + 1)
```

#### 1.3.4 수익성 악화 분석

**핵심 지표**:

1. **ROA (Return on Assets, 자산수익률)**
   ```
   ROA = 당기순이익 / 자산총계 × 100
   ```
   - **의미**: 기업이 보유한 자산으로 얼마나 효율적으로 이익을 내는가
   - **예시**: ROA 5% → 100억 자산으로 5억 순이익 창출
   - **분석 결과**:
     - 정상 기업 적자 비율: 36.58%
     - 부도 기업 적자 비율: 50.33%

2. **ROE (Return on Equity, 자기자본수익률)**
   ```
   ROE = 당기순이익 / 자본총계 × 100
   ```
   - **의미**: 주주가 투자한 자본으로 얼마나 수익을 내는가
   - **투자자 관점**: ROE가 높을수록 투자 매력도 상승

3. **영업이익률**
   ```
   영업이익률 = 영업이익 / 매출액 × 100
   ```
   - **의미**: 핵심 사업에서 얼마나 효율적으로 이익을 내는가
   - **분석 결과**:
     - 정상 기업 적자 비율: 34.55%
     - 부도 기업 적자 비율: 56.35%

#### 1.3.5 업종별 부도율 분석 (KSIC 매핑)

**한국표준산업분류(KSIC) 10차 개정**을 활용한 체계적 분류:

```python
# KSIC 매핑 파일 로드
ksic_mapping = pd.read_csv('../data/ksic_mapping.csv')

# 기업 데이터와 업종 매핑
df_industry = df.merge(
    ksic_mapping,
    left_on='업종(중분류)',
    right_on='업종코드',
    how='left'
)
```

**매핑 성공률**: 100.0% (50,100건 / 50,105건)

**대분류별 기업 수**:
- 제조업(10~34): 18,687개
- 도매 및 소매업(45~47): 10,942개
- 건설업(41~42): 6,277개
- 전문, 과학 및 기술 서비스업: 다수

**주요 발견**:

1. **부도율 상위 업종**:
   - 농업, 임업 및 어업(01~03): 3.30%
   - 부동산업(68): 높은 부도율 (구체적 수치는 차트 참조)

2. **업종별 리스크 매핑**:
   - X축: 부채비율 (높을수록 레버리지 높음)
   - Y축: ROA (낮을수록 수익성 낮음)
   - 버블 크기: 기업 수
   - 색상: 부도율

**시각화 기법**:
```python
fig = go.Figure()

# 산점도 with 버블
fig.add_trace(go.Scatter(
    x=industry_financial['부채비율'],
    y=industry_financial['ROA'],
    mode='markers',
    marker=dict(
        size=industry_financial['기업수'] / 50,  # 버블 크기
        color=industry_financial[target_col] * 100,  # 부도율
        colorscale='Reds',
        showscale=True
    ),
    text=industry_financial.index  # 업종명
))
```

3. **업종별 유동성 분석**:
   - 유동비율 < 1.0인 업종을 "유동성 위기 업종"으로 식별
   - 색상으로 위기 여부 구분

4. **업종 규모 vs 부도율**:
   - 기업 수가 많다고 부도율이 낮은 것은 아님
   - 소규모 업종에서도 낮은 부도율 관찰됨

5. **업종별 종합 히트맵**:
   - 부도율 상위 20개 업종 선택
   - 주요 지표(부도율, 부채비율, 유동비율, ROA, ROE) 표준화
   - 색상 강도로 리스크 수준 시각화

#### 1.3.6 기업 규모별 부도 패턴

**규모 지표**: 자산총계, 매출액, 종업원 수

**분위수 기반 구간 생성**:
```python
# 4분위수 기준 구간 분할
df['자산총계_규모'] = pd.qcut(
    df['자산총계'],
    q=4,
    labels=['소규모(하위25%)', '중소규모', '중대규모', '대규모(상위25%)']
)
```

**분석 결과 (자산총계 기준)**:
| 규모 | 기업 수 | 부도 기업 수 | 부도율 |
|------|---------|--------------|--------|
| 소규모(하위25%) | 12,527 | 205 | 1.6% |
| 중소규모 | - | - | - |
| 중대규모 | - | - | - |
| 대규모(상위25%) | - | - | - |

**인사이트**:
- 소규모 기업일수록 부도율이 높은 경향 (일반적 가설)
- 규모는 기업의 재무 안정성과 상관관계가 있음

#### 1.3.7 외부감사 여부별 분석

**외부감사(外監)**: 공인회계사가 기업의 재무제표를 감사하는 제도

**대상 기업**:
- 일정 규모 이상 기업은 외감 의무
- 투명성 및 신뢰성 확보 목적

**분석 결과**:
| 외감구분 | 정상 기업 비율 | 부도 기업 비율 |
|----------|----------------|----------------|
| 1 (외감 대상) | 98.64% | 1.36% |
| 2 (비외감) | - | - |

**인사이트**:
- 외감 대상 기업의 부도율이 더 낮음
- 재무 투명성이 기업 건전성과 상관관계

#### 1.3.8 신용정보 기반 부도 예측력

**신용 관련 변수**:
- 연체 정보: 기업신용공여연체기관수, 최장연체일수 등
- 신용평가등급
- 체납 정보
- 압류, 소송 정보

**분석 예시 (연체 여부)**:
| 연체 여부 | 정상 기업 비율 | 부도 기업 비율 |
|-----------|----------------|----------------|
| 연체 없음 | 95.38% | 57.58% |
| 연체 있음 | 4.62% | 42.42% |

**인사이트**:
- 부도 기업의 42.42%가 연체 이력 보유
- 연체 정보는 강력한 부도 예측 변수

**상관관계 분석**:
```python
credit_cols = [col for col in df.columns if any(keyword in col for keyword in
                ['연체', '체납', '신용평가등급', '압류', '소송'])]
```
- 노트북 2의 상관관계 분석에서 확인됨:
  - 기업신용공여연체기관수: 0.3090 (타겟과의 상관계수)
  - 최장연체일수: 0.2853

#### 1.3.9 종합 리스크 스코어 생성

**도메인 지식 기반 스코어링 시스템**:

```python
def create_risk_score(df):
    """도메인 지식 기반 종합 리스크 스코어 생성"""
    risk_score = pd.Series(index=df.index, dtype=float).fillna(0)

    # 1. 유동성 리스크 (30점)
    if '유동비율' in df.columns:
        risk_score += np.where(df['유동비율'] < 1, 10, 0)
        risk_score += np.where(df['유동비율'] < 0.5, 10, 0)
        risk_score += np.where(df['당좌비율'] < 0.8, 10, 0)

    # 2. 지급불능 리스크 (25점)
    if '자본잠식' in df.columns:
        risk_score += np.where(df['자본잠식'] == 1, 25, 0)

    # 3. 수익성 리스크 (20점)
    if 'ROA' in df.columns:
        risk_score += np.where(df['ROA'] < 0, 10, 0)
        risk_score += np.where(df['영업이익률'] < 0, 10, 0)

    # 4. 신용 리스크 (25점)
    if '연체' in df.columns:
        risk_score += np.where(df['연체'] > 0, 25, 0)

    return risk_score
```

**리스크 등급 분류**:
- 0~20점: 안전
- 21~40점: 주의
- 41~60점: 경고
- 61점 이상: 위험

**등급별 부도율**:
| 리스크등급 | 기업 수 | 부도 기업 수 | 부도율 |
|------------|---------|--------------|--------|
| 안전 | 21,411 | 161 | 0.752% |
| 주의 | 15,586 | - | - |
| 경고 | - | - | - |
| 위험 | - | - | - |

**활용 방안**:
- 신규 대출 심사 시 리스크 스코어 활용
- 포트폴리오 관리 (고위험군 모니터링 강화)
- 조기 경보 시스템 구축

### 1.4 기술 구현 세부사항

#### 1.4.1 사용 라이브러리

```python
# 데이터 처리
import pandas as pd
import numpy as np

# 시각화
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px
import plotly.graph_objects as go
from plotly.subplots import make_subplots

# 통계 분석
from scipy import stats
```

**한글 폰트 설정 (프로젝트 요구사항)**:
```python
import matplotlib.pyplot as plt
import matplotlib.font_manager as fm

# 한글 폰트 설정 (폴백 포함)
plt.rcParams['font.family'] = ['AppleGothic', 'Malgun Gothic', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False
```

#### 1.4.2 시각화 전략

**Plotly 활용 이유**:
1. **인터랙티브**: 확대, 축소, 호버(마우스 오버) 정보 제공
2. **HTML 출력**: 웹 브라우저에서 바로 볼 수 있는 차트
3. **다양한 차트 유형**: 산점도, 바 차트, 히트맵, 버블 차트 등
4. **서브플롯**: 여러 차트를 하나의 캔버스에 배치

**make_subplots 예시**:
```python
from plotly.subplots import make_subplots

fig = make_subplots(
    rows=2, cols=2,
    subplot_titles=[
        '현금비율 분포 (전체 기업)',
        '현금비율 분포 (현금보유 기업)',
        '부도 여부별 현금비율 박스플롯',
        '현금비율 구간별 부도율'
    ]
)

# 각 서브플롯에 차트 추가
fig.add_trace(go.Histogram(...), row=1, col=1)
fig.add_trace(go.Histogram(...), row=1, col=2)
fig.add_trace(go.Box(...), row=2, col=1)
fig.add_trace(go.Bar(...), row=2, col=2)

fig.show()
```

#### 1.4.3 데이터 전처리 기법

**결측치 처리**:
```python
# 비율 계산 시 분모가 0인 경우 방지
df['부채비율'] = df['부채총계'] / (df['자본총계'] + 1)

# 유효 데이터 개수 확인
valid_count = df['유동비율'].notna().sum()
```

**이상치 처리 (중앙값 사용)**:
```python
# 평균 대신 중앙값 사용 (극단값에 강건)
median_current_ratio = df['유동비율'].median()
```

**카테고리 변수 생성 (구간화)**:
```python
# 연속형 변수를 카테고리로 변환
df['자산총계_규모'] = pd.qcut(
    df['자산총계'],
    q=4,  # 4분위수
    labels=['소규모', '중소규모', '중대규모', '대규모']
)
```

### 1.5 핵심 발견사항 요약

1. **유동성**: 유동비율 < 1.0인 기업은 단기 부채 상환 능력 부족
2. **자본잠식**: 부도 기업의 17.52%가 자본잠식 상태
3. **수익성**: 부도 기업의 50% 이상이 적자 (ROA, 영업이익률)
4. **업종**: 농업/부동산업 등 특정 업종의 부도율이 높음
5. **규모**: 소규모 기업일수록 부도율 상승
6. **신용**: 연체 이력이 있는 기업의 부도 확률이 9배 높음
7. **외감**: 외부감사 대상 기업의 부도율이 낮음

---

## 2. 노트북 2: 심화 재무 분석

### 2.1 분석 목적

노트북 1의 탐색적 분석을 바탕으로, 통계적 심화 분석 및 모델링 전 고급 특성 공학(Feature Engineering)을 수행합니다.

### 2.2 분석 구조

```
환경 설정 및 데이터 로딩
   ↓
주요 재무 지표 식별
   ↓
상관관계 심화 분석
   ├── 히트맵 (상위 20개 변수)
   ├── VIF (다중공선성 진단)
   └── 타겟 상관관계 분석
   ↓
비선형 관계 탐색
   ├── Binning (구간화)
   ├── 구간별 부도율 계산
   └── 임계점 식별
   ↓
이자보상배율 심화
   ├── ICR 계산
   ├── 좀비 기업 식별
   └── 업종별 ICR 분석
   ↓
현금흐름 세부 분석
   ├── 3대 활동 분류 (OCF, ICF, FCF)
   ├── 기업 생애주기 패턴
   └── 현금흐름 상관관계
   ↓
비재무/거시경제 지표 검토
```

### 2.3 주요 분석 내용

#### 2.3.1 상관관계 심화 분석

**목적**:
- 변수 간 상관관계를 정량화하여 다중공선성 문제 파악
- 부도 여부와 높은 상관관계를 가지는 변수 선별
- 모델링에 사용할 변수 우선순위 결정

**Step 1: 타겟 상관관계 계산**

```python
# 수치형 변수만 선택
numeric_cols = df.select_dtypes(include=[np.number]).columns.tolist()

# 상관관계 행렬 계산
corr_matrix = df[numeric_cols].corr()

# 타겟과의 상관관계만 추출
target_corr = corr_matrix[TARGET_COL].sort_values(ascending=False)
```

**상위 10개 변수**:
1. 모형개발용Performance(향후1년내부도여부): 1.0000 (자기 자신)
2. 기업신용공여연체기관수(일보)(미해제): 0.3090
3. 기업신용공여연체최장연체일수(일보)(3개월내발생)(해제포함): 0.2853
4. 기업신용공여연체최장연체일수(일보)(6개월내발생)(해제포함): 높은 값

**인사이트**:
- **신용 연체 정보**가 부도 예측에 가장 강력한 변수
- 상관계수 0.3은 중간 정도의 양의 상관관계 (재무 데이터에서는 높은 편)

**Step 2: 상관관계 히트맵**

```python
# 타겟과 상관관계 상위 20개 변수 선택
top_corr_vars = target_corr.abs().sort_values(ascending=False).head(21).index.tolist()
corr_subset = df[top_corr_vars].corr()

# Plotly 히트맵
fig = go.Figure(data=go.Heatmap(
    z=corr_subset.values,
    x=corr_subset.columns,
    y=corr_subset.columns,
    colorscale='RdBu_r',  # Red-Blue 역순 (양수=빨강, 음수=파랑)
    zmid=0,  # 중간값 0
    text=corr_subset.values,
    texttemplate='%{text:.2f}',
    textfont={"size": 8}
))

fig.update_layout(
    title='상관관계 히트맵 (상위 21개 변수)',
    width=1000,
    height=900
)
```

**히트맵 해석 가이드**:
- **빨간색**: 양의 상관관계 (함께 증가)
- **파란색**: 음의 상관관계 (한쪽 증가 시 다른 쪽 감소)
- **흰색**: 상관관계 없음 (독립적)
- **숫자**: 상관계수 (-1.0 ~ 1.0)

#### 2.3.2 다중공선성 진단 (VIF)

**다중공선성(Multicollinearity)**: 독립변수들 간 강한 상관관계가 있는 현상

**문제점**:
- 회귀 계수의 분산이 커짐 (불안정)
- 변수의 중요도 해석이 어려워짐
- 모델 성능 저하

**VIF (Variance Inflation Factor, 분산팽창계수)**:

```
VIF = 1 / (1 - R²)
```

- R²: 해당 변수를 다른 변수들로 설명했을 때의 결정계수
- **해석**:
  - VIF < 5: 문제 없음
  - 5 ≤ VIF < 10: 주의 필요
  - VIF ≥ 10: 심각한 다중공선성 → 변수 제거 고려

**구현**:

```python
from statsmodels.stats.outliers_influence import variance_inflation_factor

def calculate_vif(dataframe, features):
    """VIF 계산"""
    vif_data = pd.DataFrame()
    vif_data['변수명'] = features
    vif_data['VIF'] = [
        variance_inflation_factor(dataframe[features].values, i)
        for i in range(len(features))
    ]
    return vif_data.sort_values('VIF', ascending=False)

# 상위 20개 변수에 대해 VIF 계산
vif_result = calculate_vif(df, top_20_features)
```

**분석 결과**:
- 여러 변수에서 VIF = inf (무한대) 발견
- **원인**: 완벽한 선형 종속 관계 또는 변동성 없음
- **조치**: 해당 변수들 중 일부 제거 필요

**변수 선택 전략**:
1. VIF가 높은 변수 중 타겟 상관관계가 낮은 변수부터 제거
2. 도메인 지식을 고려하여 중요한 변수는 보존
3. 재귀적으로 VIF 재계산

#### 2.3.3 비선형 관계 탐색

**배경**:
- 선형 모델(로지스틱 회귀 등)은 변수와 타겟의 선형 관계 가정
- 실제로는 비선형 관계가 존재할 수 있음
- 예: 부채비율 200%까지는 부도율 완만히 증가, 이후 급증

**Binning (구간화) 기법**:

```python
def analyze_nonlinear_relationship(df, feature, target, n_bins=10):
    """
    변수를 n개 구간으로 나누고 각 구간의 부도율 계산

    Args:
        df: 데이터프레임
        feature: 분석할 변수명
        target: 타겟 변수명
        n_bins: 구간 개수 (기본값 10)

    Returns:
        binned_stats: 구간별 통계량 데이터프레임
    """

    # 1. 변수를 10개 구간으로 분할 (백분위수 기준)
    df['bin'] = pd.qcut(df[feature], q=n_bins, duplicates='drop')

    # 2. 각 구간의 통계 계산
    binned_stats = df.groupby('bin').agg({
        target: ['count', 'sum', 'mean'],  # 기업수, 부도기업수, 부도율
        feature: ['min', 'max', 'mean']    # 구간 범위
    }).reset_index()

    # 3. 시각화 (Plotly)
    fig = go.Figure()

    # 막대 차트 (부도율)
    fig.add_trace(go.Bar(
        x=[f"{row['min']:.1f}~{row['max']:.1f}" for _, row in binned_stats.iterrows()],
        y=binned_stats[target]['mean'] * 100,
        name='부도율(%)'
    ))

    # 선 차트 (기업 수)
    fig.add_trace(go.Scatter(
        x=[f"{row['min']:.1f}~{row['max']:.1f}" for _, row in binned_stats.iterrows()],
        y=binned_stats[target]['count'],
        name='기업 수',
        yaxis='y2'
    ))

    # 이중 축 설정
    fig.update_layout(
        yaxis=dict(title='부도율(%)'),
        yaxis2=dict(title='기업 수', overlaying='y', side='right')
    )

    return binned_stats
```

**활용 예시**:
```python
# 부채비율과 부도율의 비선형 관계 분석
debt_ratio_analysis = analyze_nonlinear_relationship(
    df,
    '재무비율_부채비율',
    TARGET_COL,
    n_bins=10
)
```

**인사이트 도출**:
- 특정 구간에서 부도율이 급증하는 **임계점(threshold)** 식별
- 예: 부채비율 300% 이상에서 부도율 급증
- 구간별 차별적 리스크 관리 전략 수립 가능

**분석 결과**:
- 상위 20개 변수에 대해 비선형 관계 분석 수행
- 변동성이 낮은 변수는 분석에서 제외 (예: 값의 90%가 동일)

#### 2.3.4 이자보상배율 심화 분석

**이자보상배율 (Interest Coverage Ratio, ICR)**:

```
ICR = 영업이익 / 이자비용
```

**의미**:
- 기업이 영업활동으로 번 돈이 이자비용의 몇 배인가
- ICR이 1보다 작으면 영업이익으로 이자도 못 내는 상황

**해석 기준**:

| ICR 범위 | 분류 | 의미 | 상태 |
|----------|------|------|------|
| ICR ≥ 1.5 | 안정적 | 이자의 1.5배 이상 벌어들임 | ✅ |
| 1.0 ≤ ICR < 1.5 | 주의 | 이자는 내지만 여유 없음 | ⚠️ |
| ICR < 1.0 | 좀비 기업 | 영업이익으로 이자도 못 냄 | ❌ |
| ICR < 0 | 영업손실 | 영업활동 자체가 적자 | 💀 |

**좀비 기업 (Zombie Company)**:
- 영업활동으로 번 돈이 이자비용보다 적은 기업
- 빚만 계속 늘어나는 구조
- 부도 위험이 매우 높음

**구현**:

```python
# Step 1: 변수 탐색
operating_income_cols = [col for col in df.columns if '영업이익' in col]
interest_expense_cols = [col for col in df.columns if '이자비용' in col]

# Step 2: 적절한 컬럼 선택
operating_income = '전기영업이익'
interest_expense = '이자비용'

# Step 3: ICR 계산
df['이자보상배율_ICR'] = df[operating_income] / (df[interest_expense] + 1)

# Step 4: 카테고리 분류
def categorize_icr(icr):
    if pd.isna(icr):
        return '데이터 없음'
    elif icr < 0:
        return '영업손실 (<0)'
    elif icr < 1.0:
        return '좀비 기업 (<1.0)'
    elif icr < 1.5:
        return '주의 (1.0~1.5)'
    else:
        return '안정 (≥1.5)'

df['ICR_카테고리'] = df['이자보상배율_ICR'].apply(categorize_icr)
```

**분석 결과**:

| ICR 카테고리 | 기업 수 | 부도 기업 수 | 부도율 |
|--------------|---------|--------------|--------|
| 영업손실 (<0) | 12,951 | 254 | 2.0% |
| 좀비 기업 (<1.0) | 4,805 | 97 | 2.0% |
| 주의 (1.0~1.5) | 1,686 | 24 | 1.4% |
| 안정 (≥1.5) | 25,498 | - | 낮음 |

**인사이트**:
- 좀비 기업과 영업손실 기업의 부도율이 안정 기업의 수배
- ICR은 부도 예측의 핵심 지표

**업종별 ICR 분석**:

```python
# 업종별 평균 ICR 및 부도율
industry_icr = df.groupby('업종(중분류)').agg({
    '이자보상배율_ICR': ['mean', 'median'],
    TARGET_COL: ['count', 'mean']
}).round(2)

industry_icr.columns = ['평균_ICR', '중앙_ICR', '기업수', '부도율']
industry_icr = industry_icr.sort_values('부도율', ascending=False).head(15)
```

**업종별 ICR 상위 15개**:
| 업종 | 평균 ICR | 중앙 ICR | 기업 수 | 부도율 |
|------|----------|----------|---------|--------|
| A01 | 47.85 | 1.88 | 384 | 4.0% |
| C11 | 152.02 | 1.99 | 127 | 3.0% |
| I56 | - | - | - | - |

**인사이트**:
- 평균 ICR이 높아도 중앙 ICR이 낮으면 소수 우량 기업이 평균을 끌어올린 것
- 중앙값이 더 실질적인 업종 건전성 지표

#### 2.3.5 현금흐름 세부 분석

**현금흐름표의 3대 활동**:

| 활동 유형 | 영문 | 설명 | 양수(+) 의미 | 음수(-) 의미 |
|----------|------|------|--------------|--------------|
| **영업활동** | Operating Cash Flow (OCF) | 핵심 사업에서 발생한 현금 흐름 | 사업이 현금 창출 ✅ | 사업이 현금 소진 ❌ |
| **투자활동** | Investing Cash Flow (ICF) | 자산 취득 및 처분 | 자산 매각 (구조조정) | 투자 확대 (성장) |
| **재무활동** | Financing Cash Flow (FCF) | 자금 조달 및 상환 | 차입/증자 (자금 유입) | 상환/배당 (자금 유출) |

**현금흐름 vs 손익**:
- 손익계산서: 회계적 이익 (미수금, 감가상각 포함)
- 현금흐름표: 실제 현금 이동
- **예시**: 매출 1억 발생했지만 현금 회수 전 → 손익은 흑자, 현금흐름은 음수

**기업 생애주기 패턴**:

| 단계 | OCF | ICF | FCF | 특징 |
|------|-----|-----|-----|------|
| **도입기** | ➖ | ➖ | ➕ | 사업 초기, 자금 조달 중 |
| **성장기** | ➕ | ➖ | ➕ | 수익 발생, 적극 투자 |
| **성숙기** | ➕ | ➖ | ➖ | 안정적 수익, 배당 증가 |
| **쇠퇴기** | ➖ | ➕ | ➖ | 사업 축소, 자산 매각 |

**구현**:

```python
# Step 1: 현금흐름 변수 식별
ocf_col = '영업활동현금흐름'
icf_col = '투자활동현금흐름'
fcf_col = '재무활동현금흐름'

# Step 2: 패턴 분류 함수
def classify_cf_pattern(row):
    ocf = row[ocf_col]
    icf = row[icf_col]
    fcf = row[fcf_col]

    # 양수/음수 판정
    ocf_sign = '+' if ocf > 0 else '-'
    icf_sign = '+' if icf > 0 else '-'
    fcf_sign = '+' if fcf > 0 else '-'

    # 패턴 매칭
    pattern = f"{ocf_sign}{icf_sign}{fcf_sign}"

    if pattern == '-+-':
        return '도입기 (OCF-, ICF-, FCF+)'
    elif pattern == '+-+':
        return '성장기 (OCF+, ICF-, FCF+)'
    elif pattern == '+--':
        return '성숙기 (OCF+, ICF-, FCF-)'
    elif pattern == '-++':
        return '쇠퇴기 (OCF-, ICF+, FCF-)'
    else:
        return '기타 패턴'

df['현금흐름_패턴'] = df.apply(classify_cf_pattern, axis=1)
```

**분석 결과**:

| 현금흐름 패턴 | 기업 수 | 부도 기업 수 | 부도율 |
|--------------|---------|--------------|--------|
| 도입기 (OCF-, ICF-, FCF+) | 2,669 | 59 | 2.2% |
| 성장기 (OCF+, ICF-, FCF+) | - | - | - |
| 성숙기 (OCF+, ICF-, FCF-) | - | - | - |
| 쇠퇴기 (OCF-, ICF+, FCF-) | - | - | 높음 |
| 기타 패턴 | 36,936 | 585 | 1.6% |

**인사이트**:
- **쇠퇴기 패턴** 기업의 부도율이 가장 높음
- 영업활동 현금흐름이 음수인 기업은 위험 신호
- 현금흐름 패턴만으로도 기업 건전성 판단 가능

**현금흐름 3대 활동 간 상관관계**:

```python
cf_data = df[[ocf_col, icf_col, fcf_col, TARGET_COL]].copy()
cf_data.columns = ['영업활동CF', '투자활동CF', '재무활동CF', '부도여부']
cf_corr = cf_data.corr()
```

**상관관계 결과**:
|  | 영업활동CF | 투자활동CF | 재무활동CF | 부도여부 |
|--|------------|------------|------------|----------|
| 영업활동CF | 1.00 | -0.70 | -0.28 | -0.00 |
| 투자활동CF | -0.70 | 1.00 | -0.38 | 0.00 |
| 재무활동CF | -0.28 | -0.38 | 1.00 | 0.00 |
| 부도여부 | -0.00 | 0.00 | 0.00 | 1.00 |

**인사이트**:
- 영업활동CF와 투자활동CF는 강한 음의 상관관계 (-0.70)
  - 의미: 영업으로 벌면 투자에 사용
- 현금흐름 자체는 부도와 직접적 선형 상관관계 약함
  - 이유: 비선형 관계 또는 패턴이 중요

#### 2.3.6 비재무 및 거시경제 지표 검토

**비재무 정보**:

1. **신용 연체 정보** (42개 변수):
   - 기업신용공여연체과목수
   - 기업신용공여연체기관수
   - 최장연체일수
   - 연체 발생 시점 (3개월/6개월/1년/3년 내)

2. **외부감사 정보**:
   - 외감구분 (1: 외감 대상, 2: 비외감)
   - 외감 대상 기업의 부도율이 더 낮음

3. **기업 규모/업종**:
   - 업종(중분류)
   - 자산총계, 매출액, 종업원 수

**외부감사 영향 분석**:

| 외감구분 | 기업 수 | 부도율 |
|----------|---------|--------|
| 1 (외감 대상) | 18,192 | 1.0% |
| 2 (비외감) | 31,913 | 2.0% |

**거시경제 지표 연계 가이드**:

**필요 조건**: 데이터에 시점 정보(연도, 분기)가 있어야 함

**주요 거시경제 지표**:
- **금리**: 한국은행 기준금리
- **환율**: USD/KRW
- **GDP 성장률**: 경제 성장세
- **산업생산지수**: 제조업 활동 수준
- **실업률**: 노동시장 상황

**예시 코드**:
```python
# 한국은행 경제통계 (연도별)
macro_data = pd.DataFrame({
    'year': [2019, 2020, 2021, 2022, 2023],
    'base_rate': [1.25, 0.50, 0.50, 3.00, 3.50],      # 기준금리
    'usd_krw': [1165, 1180, 1144, 1260, 1305],        # 환율
    'gdp_growth': [2.0, -0.9, 4.0, 2.6, 1.4],         # GDP 성장률
    'unemployment': [3.8, 4.0, 3.7, 2.9, 2.6]         # 실업률
})

# 데이터 병합 (연도 기준)
df_merged = df.merge(macro_data, on='year', how='left')
```

**데이터 소스**:
- **한국은행 경제통계시스템** (ECOS): https://ecos.bok.or.kr
- **통계청**: https://kostat.go.kr
- **API 활용**: 한국은행 Open API, 공공데이터포털

**거시경제 지표 활용 효과**:
- 경기 침체기에 부도율 증가 패턴 포착
- 금리 상승기 이자 부담 증가 효과 반영
- 산업별 경기 민감도 차이 분석

**현재 데이터의 한계**:
- 시점 정보 부족 (단일 시점 스냅샷)
- 거시경제 지표 연계 불가
- 향후 데이터 수집 시 고려사항

### 2.4 기술 구현 세부사항

#### 2.4.1 사용 라이브러리

```python
# 데이터 처리
import pandas as pd
import numpy as np
from pathlib import Path

# 시각화
import plotly.express as px
import plotly.graph_objects as go
from plotly.subplots import make_subplots

# 통계 분석
from scipy import stats
from scipy.stats import chi2_contingency
from statsmodels.stats.outliers_influence import variance_inflation_factor

# 경고 메시지 숨김
import warnings
warnings.filterwarnings('ignore')
```

#### 2.4.2 데이터 경로 관리 (프로젝트 요구사항)

**하드코딩 금지 원칙**:
```python
from pathlib import Path

# 상대 경로 사용
DATA_DIR = Path('../data')
RAW_DATA_FILE = 'raw_data.csv'

# 파일 존재 여부 확인
data_path = DATA_DIR / RAW_DATA_FILE
if data_path.exists():
    df = pd.read_csv(data_path, encoding='utf-8')
else:
    print(f"⚠️  데이터 파일을 찾을 수 없습니다: {data_path}")
```

**장점**:
- 환경 독립적 (다른 PC에서도 동작)
- 디렉토리 구조 변경 시 유연하게 대응
- 코드 가독성 및 유지보수성 향상

#### 2.4.3 함수형 프로그래밍

**재사용 가능한 함수 작성**:

```python
def analyze_nonlinear_relationship(df, feature, target, n_bins=10, feature_name=None):
    """
    특정 변수와 타겟 간의 비선형 관계 분석

    이 함수는 연속형 변수를 n개 구간으로 나누고,
    각 구간의 부도율을 계산하여 비선형 패턴을 시각화합니다.

    Parameters
    ----------
    df : pd.DataFrame
        분석 대상 데이터프레임
    feature : str
        분석할 변수명 (연속형)
    target : str
        타겟 변수명 (이진 분류)
    n_bins : int, default=10
        구간 개수
    feature_name : str, optional
        차트에 표시할 변수명 (미지정 시 feature 사용)

    Returns
    -------
    pd.DataFrame
        구간별 통계량 (min, max, mean, 부도율 등)

    Examples
    --------
    >>> result = analyze_nonlinear_relationship(
    ...     df, '재무비율_부채비율', TARGET_COL, n_bins=10
    ... )
    """
    # 함수 구현 내용...
```

**독스트링(Docstring) 작성**:
- 함수의 목적과 동작 방식 설명
- 파라미터 및 반환값 명세
- 사용 예시 제공
- NumPy/SciPy 스타일 독스트링 채택

#### 2.4.4 시각화 모범 사례

**Plotly 이중 축 차트**:

```python
fig = go.Figure()

# 1차 축: 부도율 (막대)
fig.add_trace(go.Bar(
    x=bin_labels,
    y=default_rates,
    name='부도율(%)',
    yaxis='y'
))

# 2차 축: 기업 수 (선)
fig.add_trace(go.Scatter(
    x=bin_labels,
    y=company_counts,
    name='기업 수',
    mode='lines+markers',
    yaxis='y2'
))

# 레이아웃 설정
fig.update_layout(
    title='구간별 부도율 및 기업 수',
    xaxis=dict(title='구간'),
    yaxis=dict(title='부도율(%)', side='left'),
    yaxis2=dict(title='기업 수', side='right', overlaying='y'),
    legend=dict(x=0.7, y=1.1, orientation='h')
)
```

**색상 팔레트 전략**:
- 부도율: Red 계열 (`'Reds'`, `'indianred'`)
- 상관관계: Red-Blue 발산 (`'RdBu_r'`)
- 카테고리: Plotly 기본 팔레트

### 2.5 핵심 발견사항 요약

1. **상관관계**:
   - 신용 연체 정보가 부도 예측에 가장 강력 (상관계수 0.3+)
   - 다중공선성 문제 존재 (VIF = inf 변수 다수)
   - 변수 선택 및 정제 필요

2. **비선형 관계**:
   - 재무 지표와 부도율의 비선형 패턴 확인
   - 특정 임계점에서 부도율 급증
   - 구간별 차별화된 리스크 관리 필요

3. **이자보상배율**:
   - 좀비 기업(ICR < 1.0) 4,805개 식별
   - 좀비 기업의 부도율이 안정 기업의 수배
   - 업종별 ICR 편차 크므로 업종 고려 필요

4. **현금흐름 패턴**:
   - 쇠퇴기 패턴(OCF-, ICF+, FCF-) 기업의 높은 부도 위험
   - 영업활동 현금흐름이 가장 중요한 지표
   - 3대 활동의 조합으로 기업 생애주기 판별

5. **비재무 정보**:
   - 외감 대상 기업의 부도율이 절반 수준
   - 신용 연체 이력이 강력한 예측 변수
   - 거시경제 지표 연계 시 모델 성능 향상 기대

---

## 3. 재무 지표 용어 해설

### 3.1 재무제표 기본 개념

**재무제표 3종 세트**:

1. **재무상태표 (Balance Sheet)**:
   - **목적**: 특정 시점의 기업 재무 상태 스냅샷
   - **구조**: 자산 = 부채 + 자본
   - **예시**:
     ```
     [자산]
     유동자산: 1,000만원 (현금 300, 재고 700)
     비유동자산: 2,000만원 (건물, 기계)
     자산총계: 3,000만원

     [부채]
     유동부채: 500만원 (단기 차입금)
     비유동부채: 1,000만원 (장기 차입금)
     부채총계: 1,500만원

     [자본]
     자본총계: 1,500만원
     ```

2. **손익계산서 (Income Statement)**:
   - **목적**: 일정 기간 동안의 수익과 비용 요약
   - **구조**: 당기순이익 = 매출 - 비용
   - **예시**:
     ```
     매출액: 5,000만원
     - 매출원가: 3,000만원
     = 매출총이익: 2,000만원
     - 판매관리비: 1,000만원
     = 영업이익: 1,000만원
     - 이자비용: 200만원
     = 세전이익: 800만원
     - 법인세: 160만원
     = 당기순이익: 640만원
     ```

3. **현금흐름표 (Cash Flow Statement)**:
   - **목적**: 실제 현금의 유입/유출 추적
   - **구조**: 영업 + 투자 + 재무 = 현금 증감
   - **예시**:
     ```
     영업활동 현금흐름: +800만원
     투자활동 현금흐름: -500만원 (기계 구입)
     재무활동 현금흐름: -200만원 (차입금 상환)
     = 현금 순증가: 100만원
     ```

### 3.2 핵심 재무 비율

**유동성 비율**:

1. **유동비율 = 유동자산 / 유동부채**
   - 1년 이내 현금화 가능 자산 vs 1년 이내 상환 부채
   - 2.0 이상: 안전, 1.0 미만: 위험

2. **당좌비율 = (유동자산 - 재고) / 유동부채**
   - 재고 제외한 즉시 현금화 가능 자산
   - 1.0 이상: 안전

3. **현금비율 = 현금 / 유동부채**
   - 가장 보수적인 지표
   - 0.2 이상: 양호

**레버리지 비율**:

1. **부채비율 = 부채총계 / 자본총계 × 100**
   - 자본 대비 부채 비중
   - 100% 미만: 보수적, 200% 이상: 공격적

2. **자기자본비율 = 자본총계 / 자산총계 × 100**
   - 자산 중 자본 비중
   - 50% 이상: 안정적

**수익성 비율**:

1. **ROA = 당기순이익 / 자산총계 × 100**
   - 자산 효율성 지표
   - 5% 이상: 우수

2. **ROE = 당기순이익 / 자본총계 × 100**
   - 주주 투자 수익률
   - 10% 이상: 우수

3. **영업이익률 = 영업이익 / 매출액 × 100**
   - 핵심 사업 수익성
   - 업종별 편차 큼

**활동성 비율**:

1. **총자산회전율 = 매출액 / 자산총계**
   - 자산으로 얼마나 매출을 만드는가
   - 높을수록 효율적

**안정성 비율**:

1. **이자보상배율 = 영업이익 / 이자비용**
   - 이자 지급 능력
   - 1.0 미만: 위험

### 3.3 특수 개념

**자본잠식**:
- 누적 손실로 자본이 음수가 된 상태
- 자본총계 < 0
- 파산 위험 높음

**좀비 기업**:
- 영업이익으로 이자도 못 내는 기업
- ICR < 1.0
- 구조조정 대상

**순운전자본**:
- 유동자산 - 유동부채
- 단기 재무 건전성 지표
- 양수: 유동성 양호

---

## 4. 데이터 특성 및 제약사항

### 4.1 데이터 특성

**비시계열 데이터**:
- 각 데이터 포인트는 독립적인 기업의 특정 시점 정보
- 시간적 순서나 연속성 없음
- LSTM, ARIMA 등 시계열 모델 부적합

**불균형 데이터**:
- 정상: 98.49%, 부도: 1.51%
- 불균형 비율 1:66
- 일반 분류 모델 사용 시 성능 저하 가능
- 필요 기법:
  - SMOTE (Synthetic Minority Over-sampling Technique)
  - 언더샘플링
  - 클래스 가중치 조정
  - 평가 지표: Accuracy 대신 Precision, Recall, F1-score, AUROC 사용

### 4.2 데이터 품질 이슈

**결측치**:
- 일부 재무 지표에서 결측치 존재
- 처리 방법:
  - 중앙값/평균 대체
  - 별도 카테고리로 처리
  - 모델 기반 대체

**이상치**:
- 극단적인 재무 비율 값 (예: 부채비율 10,000%)
- 처리 방법:
  - 백분위수 기반 캡핑 (99th percentile)
  - 로그 변환
  - Robust 스케일링

**분모가 0인 경우**:
- 부채비율 계산 시 자본총계 = 0
- 현재 처리: +1 추가 (df['자본총계'] + 1)
- 대안: 별도 처리 또는 무한대 플래그

### 4.3 프로젝트 요구사항 준수

**1. 절대 하드코딩 금지**:
```python
# ❌ 나쁜 예
df = pd.read_csv('/Users/solkim/data/file.csv')

# ✅ 좋은 예
DATA_DIR = Path('../data')
df = pd.read_csv(DATA_DIR / 'file.csv')
```

**2. 한글 폰트 깨짐 방지**:
```python
# Matplotlib
plt.rcParams['font.family'] = ['AppleGothic', 'Malgun Gothic', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# Plotly는 별도 설정 불필요 (자동 처리)
```

**3. UTF-8 인코딩**:
```python
df = pd.read_csv(file_path, encoding='utf-8')
```

---

## 5. 종합 인사이트 및 시사점

### 5.1 부도 예측 핵심 변수

**상위 5개 예측 변수** (중요도 순):

1. **신용 연체 정보**
   - 기업신용공여연체기관수
   - 최장연체일수
   - 상관계수: 0.30+

2. **이자보상배율 (ICR)**
   - 좀비 기업 식별
   - 부도율 수배 차이

3. **유동성 비율**
   - 유동비율, 당좌비율, 현금비율
   - 단기 부채 상환 능력

4. **자본잠식 여부**
   - 자본총계 < 0
   - 부도율 2.5배 차이

5. **수익성 지표**
   - ROA, ROE, 영업이익률
   - 적자 여부가 강력한 신호

### 5.2 업종별 차별화 전략

**고위험 업종**:
- 농업, 임업 및 어업
- 부동산업
- 건설업 일부

**저위험 업종**:
- 공공 행정
- 전문 서비스업

**업종별 맞춤 모델**:
- 업종별로 재무 비율 기준값이 다름
- 예: 제조업은 재고자산 비중이 높으므로 유동비율 기준 완화
- 업종 더미 변수 또는 업종별 별도 모델 고려

### 5.3 현금흐름 패턴의 중요성

**쇠퇴기 패턴 기업**:
- OCF-, ICF+, FCF-
- 사업 축소, 자산 매각 중
- 높은 부도 위험

**성장기 패턴 기업**:
- OCF+, ICF-, FCF+
- 수익 발생하며 투자 중
- 낮은 부도 위험

**현금흐름 > 회계 이익**:
- 손익계산서 흑자여도 현금흐름 적자면 위험
- 현금흐름 지표를 반드시 포함해야 함

### 5.4 모델링 전략 제안

**1단계: 데이터 전처리**
- 결측치 처리 (중앙값 대체 또는 모델 기반)
- 이상치 처리 (99th percentile 캡핑)
- 다중공선성 제거 (VIF > 10 변수 제거)

**2단계: 특성 공학 (Feature Engineering)**
- 도메인 기반 변수 생성:
  - 이자보상배율 (ICR)
  - 현금흐름 패턴 카테고리
  - 종합 리스크 스코어
- 비선형 변수 생성:
  - 다항식 특성 (polynomial features)
  - 로그 변환
  - 비율 조합

**3단계: 불균형 처리**
- SMOTE + Tomek Links
- 또는 클래스 가중치 조정
- 평가 지표: AUROC, F1-score, Precision-Recall AUC

**4단계: 모델 선택**
- 트리 기반 모델 (Random Forest, XGBoost, LightGBM)
  - 비선형 관계 포착
  - 변수 중요도 제공
  - 이상치에 강건
- 로지스틱 회귀 (해석 가능성)
- 앙상블 (Voting, Stacking)

**5단계: 모델 해석**
- SHAP (SHapley Additive exPlanations)
  - 변수별 기여도 시각화
  - 개별 예측 설명
- Feature Importance
- Partial Dependence Plot

### 5.5 비즈니스 활용 방안

**1. 신용 평가 시스템**
- 대출 심사 자동화
- 리스크 스코어 기반 금리 차등화
- 신속한 의사결정

**2. 조기 경보 시스템**
- 고위험 기업 모니터링
- 분기별 리스크 재평가
- 선제적 대응 (한도 조정, 담보 추가 요구)

**3. 포트폴리오 관리**
- 업종별/규모별 리스크 분산
- 고위험 집중도 관리
- 예상 손실 시뮬레이션

**4. 정책적 활용**
- 좀비 기업 구조조정 우선순위
- 업종별 지원 정책 수립
- 금융 안정성 평가

---

## 6. 향후 개선 방향

### 6.1 데이터 확장

**시계열 데이터 구축**:
- 여러 시점의 재무 데이터 수집
- 추세 변화 반영 (재무 비율 개선/악화)
- 생존 분석 (Survival Analysis) 적용 가능

**거시경제 지표 연계**:
- 기준금리, 환율, GDP 성장률
- 산업생산지수, 실업률
- 시점 정보 필수

**외부 데이터 결합**:
- 뉴스 sentiment 분석
- SNS 언급량
- 주가 정보 (상장사)

### 6.2 고급 모델링 기법

**딥러닝**:
- TabNet (테이블 데이터 특화)
- AutoEncoder (이상 탐지)
- Neural Network (비선형 관계)

**앙상블 학습**:
- Stacking (여러 모델 조합)
- Blending
- Voting

**AutoML**:
- H2O AutoML
- Auto-sklearn
- PyCaret

### 6.3 모델 운영 (MLOps)

**모델 모니터링**:
- 성능 지표 추적 (AUROC, F1)
- 데이터 드리프트 감지
- 재학습 주기 설정

**A/B 테스팅**:
- 신규 모델 vs 기존 모델
- 점진적 배포

**설명 가능성**:
- SHAP, LIME
- 규제 준수 (금융권)
- 고객 설명 자료

---

## 7. 코드 재사용 가이드

### 7.1 주요 함수 활용법

**비선형 관계 분석**:
```python
from notebook1 import analyze_nonlinear_relationship

# 부채비율과 부도율의 관계 분석
result = analyze_nonlinear_relationship(
    df=df,
    feature='재무비율_부채비율',
    target='모형개발용Performance(향후1년내부도여부)',
    n_bins=10,
    feature_name='부채비율'
)
```

**리스크 스코어 생성**:
```python
from notebook1 import create_risk_score

df['리스크스코어'] = create_risk_score(df)
df['리스크등급'] = pd.cut(
    df['리스크스코어'],
    bins=[0, 20, 40, 60, 100],
    labels=['안전', '주의', '경고', '위험']
)
```

**현금흐름 패턴 분류**:
```python
from notebook2 import classify_cf_pattern

df['현금흐름_패턴'] = df.apply(classify_cf_pattern, axis=1)
```

### 7.2 시각화 템플릿

**Plotly 히트맵**:
```python
import plotly.graph_objects as go

fig = go.Figure(data=go.Heatmap(
    z=corr_matrix.values,
    x=corr_matrix.columns,
    y=corr_matrix.columns,
    colorscale='RdBu_r',
    zmid=0,
    text=corr_matrix.values,
    texttemplate='%{text:.2f}'
))

fig.update_layout(
    title='상관관계 히트맵',
    width=1000,
    height=900
)

fig.show()
```

**서브플롯 (2x2)**:
```python
from plotly.subplots import make_subplots

fig = make_subplots(
    rows=2, cols=2,
    subplot_titles=['차트1', '차트2', '차트3', '차트4']
)

fig.add_trace(go.Bar(...), row=1, col=1)
fig.add_trace(go.Scatter(...), row=1, col=2)
fig.add_trace(go.Box(...), row=2, col=1)
fig.add_trace(go.Histogram(...), row=2, col=2)

fig.update_layout(height=800, showlegend=False)
fig.show()
```

---

## 8. 참고 자료

### 8.1 재무 분석 관련

- **한국표준산업분류(KSIC)**: 통계청 (https://kssc.kostat.go.kr)
- **재무제표 해석**: 금융감독원 전자공시시스템 (https://dart.fss.or.kr)
- **기업 신용평가**: 한국기업평가, 한국신용평가

### 8.2 머신러닝 관련

- **SMOTE**: `imbalanced-learn` 라이브러리 (https://imbalanced-learn.org)
- **SHAP**: 모델 해석 라이브러리 (https://shap.readthedocs.io)
- **XGBoost, LightGBM**: 그래디언트 부스팅 라이브러리

### 8.3 시각화 관련

- **Plotly 공식 문서**: https://plotly.com/python/
- **Seaborn**: https://seaborn.pydata.org/
- **Matplotlib**: https://matplotlib.org/

---

## 9. 결론

본 보고서는 두 개의 Jupyter 노트북을 통해 수행된 한국 기업 부도 원인 분석의 전체 프로세스를 상세히 문서화했습니다.

**핵심 성과**:
1. 50,105개 기업의 159개 변수에 대한 체계적 분석
2. 도메인 지식 기반 탐색적 분석 (노트북 1)
3. 통계적 심화 분석 및 고급 특성 공학 (노트북 2)
4. 부도 예측 핵심 변수 식별 (신용 연체, ICR, 유동성, 자본잠식, 수익성)
5. 업종별/규모별/현금흐름 패턴별 리스크 차별화

**기술적 구현**:
- Plotly를 활용한 인터랙티브 시각화
- 함수형 프로그래밍으로 재사용성 확보
- 프로젝트 요구사항 준수 (하드코딩 금지, 한글 폰트 설정, UTF-8 인코딩)

**향후 활용**:
- 신용 평가 모델 개발
- 조기 경보 시스템 구축
- 포트폴리오 리스크 관리
- 정책 의사결정 지원

본 분석은 데이터 기반 의사결정의 기반을 제공하며, 실무에 즉시 적용 가능한 인사이트와 코드 자산을 생성했습니다.

---

**문서 버전**: 1.0
**작성일**: 2025-11-20
**분석 대상 노트북**:
- `01_도메인_기반_부도원인_분석.ipynb`
- `01_심화_재무_분석.ipynb`
