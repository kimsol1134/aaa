# 02_고급_도메인_특성공학.ipynb - 요약 문서

> 원본: `/home/user/aaa/notebooks/02_고급_도메인_특성공학.ipynb`

> 자동 생성됨: 중요한 로직과 출력 결과 포함

---

# 🔧 고급 도메인 특성 공학

## 목표: "왜 기업이 부도가 나는가?"에 대한 도메인 지식을 특성으로 구현

이 노트북에서는 단순한 통계적 특성이 아닌, 부도의 근본 원인을 포착하는 도메인 특화 특성을 생성합니다.

## 📌 Why: 왜 도메인 기반 특성이 필요한가?

### 1️⃣ 문제 인식: 원본 데이터의 한계

**원본 데이터 (159개 변수)의 문제점:**

- ❌ **정적 스냅샷에 불과**: 재무제표 항목 중심 (자산, 부채, 매출 등) → 특정 시점의 재무 상태만 보여줌
- ❌ **부도의 "원인"을 직접 설명하지 못함**: "유동자산 = 1억원"이라는 정보만으로는 기업이 위험한지 알 수 없음
- ❌ **한국 시장 특성 미반영**: 외부감사 의무, 제조업 중심 산업구조, 대기업 의존도 등 한국 특유의 리스크 요인 누락
- ❌ **신용 행동과 재무정보의 단절**: 연체 이력, 신용등급 등 행동 패턴 정보가 재무 지표와 따로 존재

**예시로 보는 한계:**
```
기업 A: 유동자산 1억원, 유동부채 5천만원
→ 이것만으로는 안전한지 위험한지 판단 불가
→ 유동비율(200%)을 계산해야 함 → 하지만 이것도 부족
→ 현금비율, 현금소진일수, 운전자본 회전율 등 추가 지표 필요
```

**결론: 원본 데이터는 "재료"일 뿐, "부도 위험"을 직접 측정하는 "지표"가 아님**

---

### 2️⃣ 도메인 지식: 기업이 부도나는 3가지 경로

**학계 및 실무 연구 기반 (Altman 1968; Ohlson 1980; 한국은행 2020)**

#### 🔴 경로 1: 유동성 위기 (Liquidity Crisis) - **부도의 70%**

**정의:** 현금이 고갈되어 단기 채무를 갚지 못하는 상황

**특징:**
- 장부상 흑자여도 발생 가능 (**흑자도산**)
- 매출은 있지만 현금 회수가 늦어지면 부도
- 부도 발생 **3개월 전**에 급격히 악화되는 지표들

**실제 사례:**
```
중소 제조업체 B사:
- 연간 매출 100억원, 영업이익 10억원 (흑자)
- 문제: 대기업 납품대금 회수가 3개월 소요
- 결과: 급여·임대료 지급 불가 → 흑자도산
```

**위험 신호:**
- 현금소진일수 < 30일 (한 달도 못 버팀)
- 유동비율 < 100% (단기 부채가 유동자산보다 많음)
- 운전자본 음수 (유동부채 > 유동자산)

#### 🟠 경로 2: 지급불능 (Insolvency) - **부도의 20%**

**정의:** 부채가 자산을 초과하여 구조적으로 회생 불가능한 상황

**특징:**
- 자본잠식 (자본총계 < 0)
- 영업이익으로 이자도 갚을 수 없음
- 회복에 3년 이상 소요되는 구조적 문제

**실제 사례:**
```
건설업체 C사:
- 자본금 50억원, 자본잠식 80% (자본총계 10억원)
- 연간 영업이익 5억원, 이자비용 8억원
- 결과: 이자조차 갚을 수 없음 → 구조조정 불가피
```

**위험 신호:**
- 자본잠식도 > 50% (자본의 절반 이상 손실)
- 이자보상배율 < 1.0 (영업이익 < 이자비용)
- 부채상환년수 > 10년 (현금흐름으로 부채 상환 불가)

#### 🟡 경로 3: 신뢰 상실 (Loss of Confidence) - **부도의 10%**

**정의:** 연체·체납 이력으로 금융기관과 거래처가 자금줄을 차단

**특징:**
- 갑작스러운 신용경색
- 한 번의 연체가 도미노처럼 확산
- 재무제표보다 "행동 패턴"이 더 중요

**실제 사례:**
```
유통업체 D사:
- 재무지표 양호 (부채비율 120%, ROA 5%)
- 문제: 세금 체납 1회 발생 → 신용등급 BB로 하락
- 결과: 은행이 운전자금 대출 거부 → 3개월 내 부도
```

**위험 신호:**
- 연체 이력 1회 이상
- 세금 체납 발생
- 신용등급 BB 이하 (등급 5 이상)

---

### 3️⃣ 특성 공학 전략: 경로별 조기 감지 지표 개발

**목표:** 부도 3~6개월 전에 미리 예측할 수 있는 신호 포착

#### 📊 설계한 특성 체계

| 카테고리 | 특성 수 | 목적 | 대표 지표 | 비즈니스 질문 |
|----------|---------|------|-----------|--------------|
| **유동성 위기** | 10개 | 단기 생존 가능성 | 현금소진일수, 운전자본비율 | "3개월 내 살아남을 수 있는가?" |
| **지급불능** | 8개 | 장기 회생 가능성 | 자본잠식도, 부채상환년수 | "구조적으로 회생 가능한가?" |
| **재무조작 탐지** | 15개 | 회계 신뢰성 검증 | M-Score, 발생액 품질 | "재무제표를 신뢰할 수 있는가?" |
| **한국 시장 특화** | 13개 | 한국 기업 특성 | 외감 여부, 제조업 리스크 | "한국 시장의 위험을 반영했는가?" |
| **이해관계자 행동** | 9개 | 신용 행동 패턴 | 연체, 신용등급 | "이 기업을 신뢰할 수 있는가?" |
| **성장성 지표** | 5개 | 성장 둔화 감지 | 매출/영업이익 증가율 | "성장이 멈추고 있는가?" |
| **수익성/활동성** | 5개 | 수익성과 효율성 | 영업이익률, 총자산회전율 | "돈을 얼마나 벌고 자산을 활용하는가?" |
| **복합 리스크** | 7개 | 종합 위험도 | 종합부도위험스코어 | "전체적인 위험도는 얼마나 되는가?" |
| **비선형/상호작용** | 3개 | 복잡한 관계 | 레버리지×수익성 | "복합적 위험 요인이 있는가?" |

**총 75개 특성 생성**

#### 🎯 왜 통계적 특성이 아닌 도메인 특성인가?

**통계적 접근의 문제:**
- PCA, 군집화 등은 수학적으로 데이터를 압축할 뿐
- **해석 불가능**: "주성분 1"이 무엇을 의미하는지 설명 불가
- 실무 적용 어려움: 심사역에게 "왜 대출을 거절했는가?" 설명 불가

**도메인 접근의 장점:**
- ✅ **해석 가능**: "현금소진일수가 15일이라 위험합니다"
- ✅ **실무 적용**: 심사 기준으로 직접 활용 가능
- ✅ **논리적 설득력**: "왜 이 지표가 중요한가?"에 대한 이론적 근거 존재

---

### 4️⃣ 기대 효과

#### 📈 정량적 효과

1. **예측 정확도 향상**
   - 기존 (원본 159개 변수): ROC-AUC 0.75
   - 개선 (도메인 75개 특성): ROC-AUC **0.82+** (목표)
   - PR-AUC 0.12+ (불균형 데이터에서 실질적 성능)

2. **조기 경보 능력**
   - 부도 **3~6개월 전** 신호 포착
   - Type II Error < 20% (부도 기업을 놓치는 비율 최소화)

#### 💡 정성적 효과

1. **해석 가능성 (Explainability)**
   - 각 특성이 명확한 비즈니스 의미를 가짐
   - "왜 이 기업이 위험한가?"를 구체적으로 설명 가능

2. **한국 시장 적합성**
   - 외부감사 의무, 제조업 중심, 대기업 의존도 등 반영
   - 글로벌 모델을 단순 이식하는 것보다 실효성 높음

3. **실무 활용성**
   - 신용평가사, 은행, 투자사에서 즉시 사용 가능
   - 각 특성이 심사 기준으로 활용 가능

---

### 5️⃣ 이론적 근거 (학술 배경)

**이 특성들은 임의로 만든 것이 아니라, 50년 이상의 학술 연구와 실무 경험을 기반으로 함:**

| 이론/모델 | 연도 | 핵심 기여 | 본 프로젝트 반영 |
|-----------|------|-----------|------------------|
| **Altman Z-Score** | 1968 | 유동성, 레버리지, 수익성 통합 | 유동성 위기 특성, 지급불능 특성 |
| **Ohlson O-Score** | 1980 | 로지스틱 회귀 기반 부도 예측 | 확률적 접근, 비선형 변환 |
| **Beneish M-Score** | 1999 | 재무조작 탐지 | 한국형 M-Score (15개 특성) |
| **Zmijewski Score** | 1984 | 현금흐름 중시 | OCF 기반 유동성 지표 |
| **한국은행 연구** | 2020 | 한국 기업 부도 실증 분석 | 외감, 제조업, 신용 행동 특성 |

---

### 6️⃣ 요약: 왜 이 75개 특성이 필요한가?

**핵심 메시지:**

1. **원본 데이터는 재료일 뿐, 부도 위험을 직접 측정하지 못함**
2. **기업 부도의 3가지 경로 (유동성/지급불능/신뢰상실)를 사전에 포착하기 위함**
3. **통계적 특성이 아닌 도메인 지식 기반 특성으로 해석 가능성과 실무 적용성 확보**
4. **50년 이상의 학술 연구와 한국 시장 실증 분석을 기반으로 이론적 타당성 확보**
5. **부도 3~6개월 전 조기 경보를 통해 실질적 손실 예방 가능**
6. **성장성 지표 추가로 성장 둔화라는 조기 경보 신호 포착 가능**

**다음 섹션부터 각 카테고리별로 "왜 이 지표가 필요한가?"를 구체적으로 설명하며 특성을 생성합니다.**

---

