# ë…¸íŠ¸ë¶ ë‚´ìš©: 01_ì‹¬í™”_ì¬ë¬´_ë¶„ì„.ipynb

ì´ ì…€ ê°œìˆ˜: 26
================================================================================

## [ë§ˆí¬ë‹¤ìš´ #1]

# 01_ì‹¬í™”_ì¬ë¬´_ë¶„ì„

## ê°œìš”
ì´ ë…¸íŠ¸ë¶ì€ `01_ë„ë©”ì¸_ê¸°ë°˜_ë¶€ë„ì›ì¸_ë¶„ì„.ipynb`ì˜ ì‹¬í™” ë¶„ì„ ë²„ì „ì…ë‹ˆë‹¤.

### ë¶„ì„ ë‚´ìš©
1. **ìƒê´€ê´€ê³„ ì‹¬í™” ë¶„ì„**: íˆíŠ¸ë§µ, VIF, ë‹¤ì¤‘ê³µì„ ì„±, ë¶€ë„ ê´€ë ¨ ë³€ìˆ˜ ì„ ë³„
2. **ë¹„ì„ í˜• ê´€ê³„ íƒìƒ‰**: Binning, êµ¬ê°„ë³„ ë¶€ë„ìœ¨, ì„ê³„ì  ë¶„ì„
3. **ì´ìë³´ìƒë°°ìœ¨ ì‹¬í™”**: ì¢€ë¹„ ê¸°ì—… ì‹ë³„ ë° ì—…ì¢…ë³„ ë¶„ì„
4. **í˜„ê¸ˆíë¦„ ì„¸ë¶€ ë¶„ì„**: ì˜ì—…/íˆ¬ì/ì¬ë¬´í™œë™ íŒ¨í„´, ê¸°ì—… ìƒì• ì£¼ê¸° ë¶„ì„
5. **ë¹„ì¬ë¬´/ê±°ì‹œê²½ì œ ì§€í‘œ**: ë°ì´í„° í™œìš© ê°€ëŠ¥ì„± ê²€í† 

### ë°ì´í„° íŠ¹ì„±
- **ì‹œê³„ì—´ ë°ì´í„° ì•„ë‹˜**: ê° ë°ì´í„° í¬ì¸íŠ¸ëŠ” ë…ë¦½ì 
- **ë¶ˆê· í˜• ë°ì´í„°**: ë¶€ë„ ê¸°ì—… ë¹„ìœ¨ì´ ë‚®ìŒ


--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #2]

## 1. í™˜ê²½ ì„¤ì • ë° ë°ì´í„° ë¡œë”©

--------------------------------------------------------------------------------

## [ì½”ë“œ #1]

```python
# í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸
import pandas as pd
import numpy as np
import warnings
from pathlib import Path

# Plotly ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬
import plotly.express as px
import plotly.graph_objects as go
from plotly.subplots import make_subplots
import matplotlib.pyplot as plt

# í†µê³„ ë¶„ì„
from scipy import stats
from scipy.stats import chi2_contingency
from statsmodels.stats.outliers_influence import variance_inflation_factor

warnings.filterwarnings('ignore')

# ì¶œë ¥ ì„¤ì •
pd.set_option('display.max_columns', None)
pd.set_option('display.max_rows', 100)
pd.set_option('display.float_format', '{:.2f}'.format)

print("âœ“ í™˜ê²½ ì„¤ì • ì™„ë£Œ")
print("âœ“ Plotly ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì™„ë£Œ")
```

**ì¶œë ¥:**

```
âœ“ í™˜ê²½ ì„¤ì • ì™„ë£Œ
âœ“ Plotly ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì™„ë£Œ

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #2]

```python
# ë°ì´í„° ê²½ë¡œ ì„¤ì • (í•˜ë“œì½”ë”© ê¸ˆì§€)
DATA_DIR = Path('../data')
RAW_DATA_FILE = 'ê¸°ì—…ì‹ ìš©í‰ê°€ì •ë³´_210801.csv'  # ì‹¤ì œ íŒŒì¼ëª…ìœ¼ë¡œ ë³€ê²½ í•„ìš”

# ë°ì´í„° ë¡œë”©
data_path = DATA_DIR / RAW_DATA_FILE
if data_path.exists():
    df = pd.read_csv(data_path, encoding='utf-8')
    print(f"âœ“ ë°ì´í„° ë¡œë”© ì™„ë£Œ: {len(df):,}ê°œ í–‰, {len(df.columns)}ê°œ ì»¬ëŸ¼")
else:
    print(f"âš ï¸  ë°ì´í„° íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {data_path}")
    print("   01_ë„ë©”ì¸_ê¸°ë°˜_ë¶€ë„ì›ì¸_ë¶„ì„.ipynbì—ì„œ ìƒì„±í•œ ì „ì²˜ë¦¬ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.")

# íƒ€ê²Ÿ ë³€ìˆ˜ëª… ì„¤ì •
TARGET_COL = 'ëª¨í˜•ê°œë°œìš©Performance(í–¥í›„1ë…„ë‚´ë¶€ë„ì—¬ë¶€)'
```

**ì¶œë ¥:**

```
âœ“ ë°ì´í„° ë¡œë”© ì™„ë£Œ: 50,105ê°œ í–‰, 159ê°œ ì»¬ëŸ¼

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #3]

## 2. ì£¼ìš” ì¬ë¬´ ì§€í‘œ ì‹ë³„

01_ë„ë©”ì¸_ê¸°ë°˜_ë¶€ë„ì›ì¸_ë¶„ì„.ipynbì—ì„œ ì‹ë³„í•œ ì£¼ìš” ì§€í‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.

--------------------------------------------------------------------------------

## [ì½”ë“œ #3]

```python
# ì£¼ìš” ì¬ë¬´ ì§€í‘œ ì¹´í…Œê³ ë¦¬ ìë™ ì‹ë³„
financial_metrics = {
    'liquidity': [],
    'debt': [],
    'profitability': [],
    'cashflow': [],
    'interest_coverage': []
}

# ì»¬ëŸ¼ëª…ì—ì„œ ìë™ ì‹ë³„
for col in df.columns:
    col_lower = col.lower()
    if 'ìœ ë™' in col or 'current' in col_lower or 'ë‹¹ì¢Œ' in col:
        financial_metrics['liquidity'].append(col)
    elif 'ë¶€ì±„' in col or 'debt' in col_lower or 'ìê¸°ìë³¸' in col or 'ë ˆë²„ë¦¬ì§€' in col:
        financial_metrics['debt'].append(col)
    elif 'roa' in col_lower or 'roe' in col_lower or 'ìˆ˜ìµ' in col or 'ì´ìµ' in col:
        financial_metrics['profitability'].append(col)
    elif 'í˜„ê¸ˆ' in col or 'cash' in col_lower:
        financial_metrics['cashflow'].append(col)
    elif 'ì´ì' in col or 'interest' in col_lower:
        financial_metrics['interest_coverage'].append(col)

# ì‹ë³„ëœ ì§€í‘œ ì¶œë ¥
print("=== ì‹ë³„ëœ ì¬ë¬´ ì§€í‘œ ===")
total_metrics = 0
for category, metrics in financial_metrics.items():
    if metrics:
        print(f"\n{category.upper()}: {len(metrics)}ê°œ")
        for m in metrics[:3]:
            print(f"  â€¢ {m}")
        if len(metrics) > 3:
            print(f"  ... ì™¸ {len(metrics)-3}ê°œ")
        total_metrics += len(metrics)

print(f"\nâœ“ ì´ {total_metrics}ê°œ ì¬ë¬´ ì§€í‘œ ì‹ë³„ë¨")
```

**ì¶œë ¥:**

```
=== ì‹ë³„ëœ ì¬ë¬´ ì§€í‘œ ===

LIQUIDITY: 8ê°œ
  â€¢ ìœ ë™ìì‚°
  â€¢ ë¹„ìœ ë™ìì‚°
  â€¢ ë‹¹ì¢Œìì‚°
  ... ì™¸ 5ê°œ

DEBT: 8ê°œ
  â€¢ ë¶€ì±„ì´ê³„
  â€¢ ìê¸°ìë³¸(ë‚©ì…ìë³¸ê¸ˆ)
  â€¢ ë¶€ì±„ìƒí™˜ê³„ìˆ˜
  ... ì™¸ 5ê°œ

PROFITABILITY: 17ê°œ
  â€¢ ì´ìµì‰ì—¬ê¸ˆ
  â€¢ ë§¤ì¶œì´ì´ìµ
  â€¢ ë²•ì¸ì„¸ë¹„ìš©ì°¨ê°ì „ìˆœì´ìµ
  ... ì™¸ 14ê°œ

CASHFLOW: 7ê°œ
  â€¢ í˜„ê¸ˆ
  â€¢ í˜„ê¸ˆë“±ê°€ë¬¼
  â€¢ í˜„ê¸ˆì„±ìì‚°
  ... ì™¸ 4ê°œ

INTEREST_COVERAGE: 6ê°œ
  â€¢ ì´ìë¹„ìš©
  â€¢ ì‚¬ì±„ì´ì(ë‹¹ê¸°)
  â€¢ ì´ìë³´ìƒë°°ìœ¨
  ... ì™¸ 3ê°œ

âœ“ ì´ 46ê°œ ì¬ë¬´ ì§€í‘œ ì‹ë³„ë¨

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #4]

## 3. ìƒê´€ê´€ê³„ ì‹¬í™” ë¶„ì„

### ëª©ì 
- ë³€ìˆ˜ ê°„ ìƒê´€ê´€ê³„ë¥¼ ì‹œê°í™”í•˜ì—¬ ë‹¤ì¤‘ê³µì„ ì„± ë¬¸ì œ íŒŒì•…
- ë¶€ë„ ì—¬ë¶€ì™€ ë†’ì€ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ë³€ìˆ˜ ì„ ë³„
- ëª¨ë¸ë§ì— ì‚¬ìš©í•  ë³€ìˆ˜ ìš°ì„ ìˆœìœ„ ê²°ì •

--------------------------------------------------------------------------------

## [ì½”ë“œ #4]

```python
# ìˆ˜ì¹˜í˜• ë³€ìˆ˜ ì„ íƒ ë° ìƒê´€ê´€ê³„ ê³„ì‚°
numeric_cols = df.select_dtypes(include=[np.number]).columns.tolist()

if TARGET_COL in numeric_cols:
    # ìƒê´€ê´€ê³„ ê³„ì‚°
    corr_matrix = df[numeric_cols].corr()
    target_corr = corr_matrix[TARGET_COL].sort_values(ascending=False)

    print("=== ë¶€ë„ ì—¬ë¶€ì™€ ìƒê´€ê´€ê³„ ìƒìœ„ 10ê°œ ë³€ìˆ˜ ===")
    for i, (var, corr_val) in enumerate(target_corr.head(11).items(), 1):
        if var != TARGET_COL:
            print(f"{i:2d}. {var[:50]:50s} : {corr_val:7.4f}")

    print("\n=== ë¶€ë„ ì—¬ë¶€ì™€ ìƒê´€ê´€ê³„ í•˜ìœ„ 10ê°œ ë³€ìˆ˜ ===")
    for i, (var, corr_val) in enumerate(target_corr.tail(10).items(), 1):
        print(f"{i:2d}. {var[:50]:50s} : {corr_val:7.4f}")
else:
    print(f"âš ï¸  íƒ€ê²Ÿ ë³€ìˆ˜ '{TARGET_COL}'ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
=== ë¶€ë„ ì—¬ë¶€ì™€ ìƒê´€ê´€ê³„ ìƒìœ„ 10ê°œ ë³€ìˆ˜ ===
 2. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                               :  0.3090
 3. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                   :  0.2853
 4. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                   :  0.2630
 5. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(1ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                    :  0.2376
 6. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                               :  0.2249
 7. ìƒì¥íì§€ì¼ì                                             :  0.2161
 8. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                      :  0.2041
 9. ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                      :  0.1898
10. ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                          :  0.1878
11. ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ì´ìì—°ì²´)(ë¯¸í•´ì œ)                    :  0.1720

=== ë¶€ë„ ì—¬ë¶€ì™€ ìƒê´€ê´€ê³„ í•˜ìœ„ 10ê°œ ë³€ìˆ˜ ===
 1. ì¢…ì—…ì›ìˆ˜                                               : -0.0066
 2. íŒë§¤ë¹„ì™€ê´€ë¦¬ë¹„                                            : -0.0068
 3. í˜„ê¸ˆì„±ìì‚°                                              : -0.0070
 4. ë¶€ì±„ìƒí™˜ê³„ìˆ˜.1                                           : -0.0074
 5. ì†Œìœ ê±´ì¶•ë¬¼ì‹¤ê±°ë˜ê°€í•©ê³„                                        : -0.0078
 6. ì¬ë¬´ë¹„ìœ¨_ìê¸°ìë³¸ì´ìµë¥ (ROE)                                  : -0.0084
 7. ì¬ë¬´ë¹„ìœ¨_ì´ìì‚°ìˆœì´ìµë¥                                        : -0.0388
 8. ì¬ë¬´ë¹„ìœ¨_ìê¸°ìë³¸ë¹„ìœ¨                                        : -0.0425
 9. ì‹ ìš©ë„íŒë‹¨ì •ë³´ê³µê³µì •ë³´ìµœê·¼í•´ì œì¼ìë¡œë¶€í„°ê²½ê³¼ì¼ìˆ˜(CIS)(í•´ì œ,ì‚­ì œ)               : -0.1248
10. ì‹ ìš©ë„íŒë‹¨ì •ë³´ê³µê³µì •ë³´ìµœê·¼ë°œìƒì¼ìë¡œë¶€í„°ê²½ê³¼ì¼ìˆ˜(CIS)(í•´ì œ,ì‚­ì œ)               : -0.1248

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #5]

```python
# ìƒê´€ê´€ê³„ íˆíŠ¸ë§µ (Plotly) - ìƒìœ„ 20ê°œ ë³€ìˆ˜
if TARGET_COL in numeric_cols:
    # ë¶€ë„ ì—¬ë¶€ì™€ ìƒê´€ê´€ê³„ ì ˆëŒ€ê°’ ê¸°ì¤€ ìƒìœ„ 20ê°œ
    top_corr_vars = target_corr.abs().sort_values(ascending=False).head(21).index.tolist()
    corr_subset = df[top_corr_vars].corr()

    # Plotly íˆíŠ¸ë§µ
    fig = go.Figure(data=go.Heatmap(
        z=corr_subset.values,
        x=corr_subset.columns,
        y=corr_subset.index,
        colorscale='RdBu_r',
        zmid=0,
        zmin=-1,
        zmax=1,
        text=corr_subset.values,
        texttemplate='%{text:.2f}',
        textfont={"size": 8},
        colorbar=dict(title="ìƒê´€ê³„ìˆ˜"),
        hovertemplate='X: %{x}<br>Y: %{y}<br>ìƒê´€ê³„ìˆ˜: %{z:.3f}<extra></extra>'
    ))

    fig.update_layout(
        title='ì£¼ìš” ì¬ë¬´ ì§€í‘œ ìƒê´€ê´€ê³„ íˆíŠ¸ë§µ (ë¶€ë„ ì—¬ë¶€ ê¸°ì¤€ ìƒìœ„ 20ê°œ)',
        title_x=0.5,
        width=1200,
        height=1000,
        xaxis=dict(tickangle=-45, side='bottom'),
        yaxis=dict(tickangle=0),
        margin=dict(l=200, r=100, t=100, b=200)
    )

    fig.show()

    print(f"âœ“ ìƒê´€ê´€ê³„ íˆíŠ¸ë§µ ìƒì„± ì™„ë£Œ ({len(top_corr_vars)}ê°œ ë³€ìˆ˜)")

    # ê³ ìƒê´€ ë³€ìˆ˜ ìŒ ì°¾ê¸° (ë‹¤ì¤‘ê³µì„ ì„± ì˜ì‹¬)
    high_corr_pairs = []
    for i in range(len(corr_subset.columns)):
        for j in range(i+1, len(corr_subset.columns)):
            if abs(corr_subset.iloc[i, j]) > 0.8:
                high_corr_pairs.append((
                    corr_subset.columns[i],
                    corr_subset.columns[j],
                    corr_subset.iloc[i, j]
                ))

    if high_corr_pairs:
        print(f"\nâš ï¸  ë†’ì€ ìƒê´€ê´€ê³„ ë³€ìˆ˜ ìŒ ({len(high_corr_pairs)}ê°œ, |r| > 0.8):")
        for var1, var2, corr_val in high_corr_pairs[:10]:
            print(f"  â€¢ {var1[:30]:30s} â†” {var2[:30]:30s} : {corr_val:.3f}")
        if len(high_corr_pairs) > 10:
            print(f"  ... ì™¸ {len(high_corr_pairs)-10}ê°œ")
else:
    print("âš ï¸  ìƒê´€ê´€ê³„ ë¶„ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
âœ“ ìƒê´€ê´€ê³„ íˆíŠ¸ë§µ ìƒì„± ì™„ë£Œ (21ê°œ ë³€ìˆ˜)

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #5]

### 3.1 ë‹¤ì¤‘ê³µì„ ì„± ì§„ë‹¨ (VIF)

VIF (Variance Inflation Factor)ë¡œ ë‹¤ì¤‘ê³µì„ ì„±ì„ ì •ëŸ‰ì ìœ¼ë¡œ í‰ê°€í•©ë‹ˆë‹¤.

**í•´ì„ ê¸°ì¤€:**
- VIF < 5: ë¬¸ì œ ì—†ìŒ âœ…
- 5 â‰¤ VIF < 10: ì£¼ì˜ í•„ìš” âš ï¸
- VIF â‰¥ 10: ë‹¤ì¤‘ê³µì„ ì„± ì‹¬ê° âŒ

--------------------------------------------------------------------------------

## [ì½”ë“œ #6]

```python
# VIF ê³„ì‚°
def calculate_vif(dataframe, features):
    """VIF(ë¶„ì‚°íŒ½ì°½ê³„ìˆ˜) ê³„ì‚°"""
    vif_data = pd.DataFrame()
    vif_data['ë³€ìˆ˜ëª…'] = features
    vif_data['VIF'] = [
        variance_inflation_factor(dataframe[features].values, i)
        for i in range(len(features))
    ]
    return vif_data.sort_values('VIF', ascending=False)

if TARGET_COL in numeric_cols:
    # íƒ€ê²Ÿ ì œì™¸í•˜ê³  ìƒìœ„ 15ê°œ ë³€ìˆ˜ ì„ íƒ
    vif_vars = [v for v in top_corr_vars[:16] if v != TARGET_COL]

    # ê²°ì¸¡ì¹˜ ë° ë¬´í•œëŒ€ ì œê±°
    df_vif = df[vif_vars].replace([np.inf, -np.inf], np.nan).dropna()

    if len(df_vif) > 0 and len(vif_vars) > 1:
        try:
            vif_result = calculate_vif(df_vif, vif_vars)

            print("=== VIF ë¶„ì„ ê²°ê³¼ ===")
            print(vif_result.to_string(index=False))

            # Plotly ë§‰ëŒ€ê·¸ë˜í”„
            colors = ['red' if x >= 10 else 'orange' if x >= 5 else 'green'
                     for x in vif_result['VIF']]

            fig = go.Figure()

            fig.add_trace(go.Bar(
                y=vif_result['ë³€ìˆ˜ëª…'],
                x=vif_result['VIF'],
                orientation='h',
                marker_color=colors,
                text=[f'{v:.1f}' for v in vif_result['VIF']],
                textposition='outside',
                hovertemplate='ë³€ìˆ˜: %{y}<br>VIF: %{x:.2f}<extra></extra>'
            ))

            # ê¸°ì¤€ì„ 
            fig.add_vline(x=10, line_dash="dash", line_color="red", line_width=2,
                         annotation_text="ìœ„í—˜ (VIF=10)", annotation_position="top right")
            fig.add_vline(x=5, line_dash="dash", line_color="orange", line_width=2,
                         annotation_text="ì£¼ì˜ (VIF=5)", annotation_position="top right")

            fig.update_layout(
                title='ë‹¤ì¤‘ê³µì„ ì„± ì§„ë‹¨ (VIF)',
                title_x=0.5,
                xaxis_title='VIF ê°’',
                yaxis_title='ë³€ìˆ˜ëª…',
                height=max(400, len(vif_result) * 25),
                width=1000,
                showlegend=False,
                margin=dict(l=250, r=150, t=80, b=80)
            )

            fig.show()

            # ë¬¸ì œ ë³€ìˆ˜ ìš”ì•½
            high_vif = vif_result[vif_result['VIF'] >= 10]
            medium_vif = vif_result[(vif_result['VIF'] >= 5) & (vif_result['VIF'] < 10)]

            if len(high_vif) > 0:
                print(f"\nâŒ ë‹¤ì¤‘ê³µì„ ì„± ì‹¬ê° ({len(high_vif)}ê°œ, VIF â‰¥ 10):")
                for _, row in high_vif.iterrows():
                    print(f"  â€¢ {row['ë³€ìˆ˜ëª…']}: VIF={row['VIF']:.2f}")

            if len(medium_vif) > 0:
                print(f"\nâš ï¸  ë‹¤ì¤‘ê³µì„ ì„± ì£¼ì˜ ({len(medium_vif)}ê°œ, 5 â‰¤ VIF < 10):")
                for _, row in medium_vif.iterrows():
                    print(f"  â€¢ {row['ë³€ìˆ˜ëª…']}: VIF={row['VIF']:.2f}")

            if len(high_vif) == 0 and len(medium_vif) == 0:
                print("\nâœ… ëª¨ë“  ë³€ìˆ˜ì˜ VIF < 5: ë‹¤ì¤‘ê³µì„ ì„± ë¬¸ì œ ì—†ìŒ")

        except Exception as e:
            print(f"âš ï¸  VIF ê³„ì‚° ì¤‘ ì˜¤ë¥˜: {e}")
    else:
        print("âš ï¸  VIF ê³„ì‚°ì— ì‚¬ìš©í•  ìœ íš¨í•œ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
=== VIF ë¶„ì„ ê²°ê³¼ ===
                                     ë³€ìˆ˜ëª…   VIF
                    ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)   inf
        ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)   inf
        ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)   inf
         ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(1ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)   inf
                    ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)   inf
           ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)   inf
           ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)   inf
               ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)   inf
         ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ì´ìì—°ì²´)(ë¯¸í•´ì œ)   inf
 ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)   inf
ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)   inf
               ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)   inf
                           ê¸°ì—…ì‹ ìš©í‰ê°€ë“±ê¸‰(êµ¬ê°„í™”) 10.97
                                  ìƒì¥íì§€ì¼ì  9.45
                 ì‹ ìš©ë„íŒë‹¨ì •ë³´ê³µê³µì •ë³´ê±´ìˆ˜(CIS)(ë¯¸í•´ì œ)  3.04

```

```

âŒ ë‹¤ì¤‘ê³µì„ ì„± ì‹¬ê° (13ê°œ, VIF â‰¥ 10):
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(1ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ì´ìì—°ì²´)(ë¯¸í•´ì œ): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ): VIF=inf
  â€¢ ê¸°ì—…ì‹ ìš©í‰ê°€ë“±ê¸‰(êµ¬ê°„í™”): VIF=10.97

âš ï¸  ë‹¤ì¤‘ê³µì„ ì„± ì£¼ì˜ (1ê°œ, 5 â‰¤ VIF < 10):
  â€¢ ìƒì¥íì§€ì¼ì: VIF=9.45

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #6]

## 4. ë¹„ì„ í˜• ê´€ê³„ íƒìƒ‰

ì¬ë¬´ ì§€í‘œì™€ ë¶€ë„ í™•ë¥  ê°„ì˜ ë¹„ì„ í˜• ê´€ê³„ë¥¼ Binningì„ í†µí•´ íƒìƒ‰í•©ë‹ˆë‹¤.

### ë¶„ì„ ë°©ë²•
1. ë³€ìˆ˜ë¥¼ 10ê°œ êµ¬ê°„ìœ¼ë¡œ ë¶„í•  (ë°±ë¶„ìœ„ìˆ˜ ê¸°ë°˜)
2. ê° êµ¬ê°„ì˜ ë¶€ë„ìœ¨ ê³„ì‚°
3. ì„ê³„ì (threshold) ì‹ë³„
4. êµ¬ê°„ë³„ ë¦¬ìŠ¤í¬ íŒ¨í„´ ì‹œê°í™”

--------------------------------------------------------------------------------

## [ì½”ë“œ #7]

```python
def analyze_nonlinear_relationship(df, feature, target, n_bins=10, feature_name=None):
    """
    íŠ¹ì • ë³€ìˆ˜ì™€ íƒ€ê²Ÿ ê°„ì˜ ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ (Plotly ë²„ì „)

    Args:
        df: ë°ì´í„°í”„ë ˆì„
        feature: ë¶„ì„í•  ë³€ìˆ˜ëª…
        target: íƒ€ê²Ÿ ë³€ìˆ˜ëª…
        n_bins: êµ¬ê°„ ê°œìˆ˜
        feature_name: í‘œì‹œí•  ë³€ìˆ˜ëª…

    Returns:
        binned_stats: êµ¬ê°„ë³„ í†µê³„
    """
    if feature_name is None:
        feature_name = feature

    # ê²°ì¸¡ì¹˜ ë° ë¬´í•œëŒ€ ì œê±°
    df_clean = df[[feature, target]].replace([np.inf, -np.inf], np.nan).dropna()

    if len(df_clean) == 0:
        print(f"âš ï¸  {feature_name}: ìœ íš¨í•œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.")
        return None

    # ë°±ë¶„ìœ„ìˆ˜ ê¸°ë°˜ binning
    try:
        df_clean['bin'] = pd.qcut(df_clean[feature], q=n_bins, duplicates='drop')
    except ValueError:
        # ê³ ìœ ê°’ì´ ë„ˆë¬´ ì ì–´ì„œ qcutì´ ì‹¤íŒ¨í•  ê²½ìš° cutìœ¼ë¡œ ëŒ€ì²´ ì‹œë„
        df_clean['bin'] = pd.cut(df_clean[feature], bins=n_bins)

    # êµ¬ê°„ë³„ í†µê³„
    binned_stats = df_clean.groupby('bin', observed=True).agg({
        target: ['count', 'sum', 'mean'],
        feature: ['min', 'max', 'mean']
    }).reset_index()

    binned_stats.columns = ['bin', 'count', 'n_default', 'default_rate',
                            'feature_min', 'feature_max', 'feature_mean']

    # --- Xì¶• ë¼ë²¨ í¬ë§·íŒ… í•¨ìˆ˜ ---
    def format_label(val):
        if val == int(val):
            return f"{int(val)}"
        return f"{val:.2f}"

    # [ìˆ˜ì •ë¨] <br> íƒœê·¸ë¥¼ ì œê±°í•˜ì—¬ í•œ ì¤„ë¡œ í‘œì‹œë˜ë„ë¡ ë³€ê²½
    x_labels = [f"{format_label(row['feature_min'])}~{format_label(row['feature_max'])}"
                for _, row in binned_stats.iterrows()]

    # ì„œë¸Œí”Œë¡¯ ìƒì„±
    fig = make_subplots(
        rows=2, cols=1,
        subplot_titles=[f'ğŸ“Š {feature_name} êµ¬ê°„ë³„ ë¶€ë„ìœ¨', f'ğŸ“‰ {feature_name} êµ¬ê°„ë³„ ìƒ˜í”Œ ë¶„í¬'],
        vertical_spacing=0.3,
        row_heights=[0.6, 0.4]
    )

    avg_rate = df_clean[target].mean()

    # 1) êµ¬ê°„ë³„ ë¶€ë„ìœ¨ ë§‰ëŒ€ê·¸ë˜í”„
    colors_bars = ['crimson' if rate > avg_rate * 1.5 else 'orange' if rate > avg_rate else 'mediumseagreen'
                   for rate in binned_stats['default_rate']]

    fig.add_trace(go.Bar(
        x=x_labels,
        y=binned_stats['default_rate'] * 100,
        marker_color=colors_bars,
        text=[f"{rate*100:.1f}%<br>(n={cnt:,})"
              for rate, cnt in zip(binned_stats['default_rate'], binned_stats['count'])],
        textposition='outside',
        hovertemplate='êµ¬ê°„: %{x}<br>ë¶€ë„ìœ¨: %{y:.2f}%<br>ìƒ˜í”Œìˆ˜: %{text}<extra></extra>',
        showlegend=False
    ), row=1, col=1)

    # í‰ê· ì„ 
    fig.add_hline(y=avg_rate*100, line_dash="dash", line_color="gray", line_width=2,
                  annotation_text=f"ì „ì²´ í‰ê· : {avg_rate*100:.2f}%",
                  annotation_position="top right",
                  row=1, col=1)

    # 2) êµ¬ê°„ë³„ ìƒ˜í”Œ ìˆ˜ ë§‰ëŒ€ê·¸ë˜í”„
    fig.add_trace(go.Bar(
        x=x_labels,
        y=binned_stats['count'],
        marker_color='lightsteelblue',
        marker_opacity=0.8,
        text=[f"{cnt:,}" for cnt in binned_stats['count']],
        textposition='outside',
        hovertemplate='êµ¬ê°„: %{x}<br>ìƒ˜í”Œ ìˆ˜: %{y:,}<extra></extra>',
        showlegend=False
    ), row=2, col=1)

    # --- ì¶• ì„¤ì • (ë¼ë²¨ ê°ë„ ì¡°ì •) ---
    # [ìˆ˜ì •ë¨] ë¼ë²¨ì´ í•œ ì¤„ì´ë¯€ë¡œ 45ë„ íšŒì „ë³´ë‹¤ëŠ” 0ë„(ê°€ë¡œ)ê°€ ë³´ê¸° ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    # ë§Œì•½ ë¼ë²¨ì´ ê¸¸ì–´ì„œ ê²¹ì¹œë‹¤ë©´ automarginì´ ì‘ë™í•˜ê±°ë‚˜, tickangleì„ ë‹¤ì‹œ 45ë¡œ ë³€ê²½í•˜ì„¸ìš”.
    tick_angle = 45

    # 1ë²ˆ ê·¸ë˜í”„ (ìƒë‹¨)
    fig.update_xaxes(
        tickangle=tick_angle,
        title_text=None,
        automargin=True,
        row=1, col=1
    )
    fig.update_yaxes(title_text="ë¶€ë„ìœ¨ (%)", row=1, col=1)

    # Yì¶• ë²”ìœ„ ì—¬ìœ  ìˆê²Œ ì¡°ì •
    max_y_rate = binned_stats['default_rate'].max() * 100
    fig.update_yaxes(range=[0, max_y_rate * 1.25], row=1, col=1)

    # 2ë²ˆ ê·¸ë˜í”„ (í•˜ë‹¨)
    fig.update_xaxes(
        tickangle=tick_angle,
        title_text=f"{feature_name} êµ¬ê°„ (Feature Range)",
        automargin=True,
        row=2, col=1
    )
    fig.update_yaxes(title_text="ìƒ˜í”Œ ìˆ˜", row=2, col=1)

    # Yì¶• ë²”ìœ„ ì—¬ìœ  ìˆê²Œ ì¡°ì •
    max_y_count = binned_stats['count'].max()
    fig.update_yaxes(range=[0, max_y_count * 1.25], row=2, col=1)

    # ì „ì²´ ë ˆì´ì•„ì›ƒ
    fig.update_layout(
        height=900,
        title={
            'text': f"<b>{feature_name}</b> ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„",
            'y':0.98,
            'x':0.5,
            'xanchor': 'center',
            'yanchor': 'top'
        },
        showlegend=False,
        margin=dict(t=80, b=100, l=80, r=80),
        template="plotly_white",
        font=dict(family="Malgun Gothic") # í•œê¸€ í°íŠ¸ ì„¤ì • (í•„ìš”ì‹œ ë³€ê²½)
    )

    fig.show()

    return binned_stats

print("âœ“ ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ í•¨ìˆ˜ ì •ì˜ ì™„ë£Œ")
print("  ì‚¬ìš©ë²•: analyze_nonlinear_relationship(df, 'ë³€ìˆ˜ëª…', TARGET_COL, n_bins=10)")
```

**ì¶œë ¥:**

```
âœ“ ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ í•¨ìˆ˜ ì •ì˜ ì™„ë£Œ
  ì‚¬ìš©ë²•: analyze_nonlinear_relationship(df, 'ë³€ìˆ˜ëª…', TARGET_COL, n_bins=10)

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #8]

```python
# ì£¼ìš” ì¬ë¬´ ì§€í‘œì— ëŒ€í•´ ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ ì‹¤í–‰
if TARGET_COL in numeric_cols:
    # 1ë‹¨ê³„: íƒ€ê²Ÿê³¼ ìƒê´€ê´€ê³„ ì ˆëŒ€ê°’ ìƒìœ„ 20ê°œ ë³€ìˆ˜ ì„ íƒ
    top_20_features = target_corr.abs().sort_values(ascending=False).iloc[1:21].index.tolist()

    print("=" * 80)
    print("ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ì„ ìœ„í•œ ë³€ìˆ˜ ì„ íƒ")
    print("=" * 80)
    print()

    # 2ë‹¨ê³„: ë³€ë™ì„± ì²´í¬ (ë³€ë™ì„±ì´ ë‚®ì€ ë³€ìˆ˜ ì œì™¸)
    suitable_features = []

    for feature in top_20_features:
        # ìœ íš¨í•œ ë°ì´í„° ì¶”ì¶œ
        valid_data = df[feature].replace([np.inf, -np.inf], np.nan).dropna()

        # ë³€ë™ì„± ì²´í¬ ê¸°ì¤€
        n_unique = valid_data.nunique()  # ê³ ìœ ê°’ ê°œìˆ˜
        variance = valid_data.var()       # ë¶„ì‚°
        non_zero_pct = (valid_data != 0).mean()  # 0ì´ ì•„ë‹Œ ê°’ì˜ ë¹„ìœ¨

        # í•„í„°ë§ ì¡°ê±´
        is_suitable = (
            n_unique >= 10 and           # ìµœì†Œ 10ê°œ ì´ìƒì˜ ê³ ìœ ê°’
            variance > 0 and             # ë¶„ì‚°ì´ 0ë³´ë‹¤ í¼
            non_zero_pct >= 0.1          # ìµœì†Œ 10% ì´ìƒì´ 0ì´ ì•„ë‹˜
        )

        if is_suitable:
            suitable_features.append(feature)
            # ë³€ìˆ˜ëª… ê¸¸ì´ ì œí•œ (60ì)
            var_name = feature[:60] if len(feature) > 60 else feature
            print(f"âœ“ {var_name:60s} | ê³ ìœ ê°’: {n_unique:5d}, ë¹„0ë¹„ìœ¨: {non_zero_pct*100:5.1f}%")
        else:
            var_name = feature[:60] if len(feature) > 60 else feature
            reason = []
            if n_unique < 10:
                reason.append(f"ê³ ìœ ê°’ {n_unique}ê°œ")
            if variance == 0:
                reason.append("ë¶„ì‚°=0")
            if non_zero_pct < 0.1:
                reason.append(f"ë¹„0ë¹„ìœ¨ {non_zero_pct*100:.1f}%")

            print(f"âœ— {var_name:60s} | ì œì™¸: {', '.join(reason)}")

    # ìƒìœ„ 5ê°œë§Œ ì„ íƒ
    top_features = suitable_features[:5]

    print("\n" + "=" * 80)
    print(f"ìµœì¢… ì„ íƒëœ ë³€ìˆ˜: {len(top_features)}ê°œ")
    print("=" * 80)
    for i, feat in enumerate(top_features, 1):
        corr_val = target_corr[feat]
        feat_short = feat[:70] if len(feat) > 70 else feat
        print(f"  {i}. {feat_short}")
        print(f"     ìƒê´€ê³„ìˆ˜: {corr_val:.4f}")

    if len(top_features) == 0:
        print("\nâš ï¸  ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ì— ì í•©í•œ ë³€ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.")
        print("   ìƒê´€ê´€ê³„ëŠ” ë†’ì§€ë§Œ ë³€ë™ì„±ì´ ë‚®ì€ ë³€ìˆ˜ë“¤ì…ë‹ˆë‹¤.")
        print("   ì´ëŸ° ë³€ìˆ˜ëŠ” ì´ì§„ ë³€ìˆ˜ë‚˜ ë²”ì£¼í˜• ë³€ìˆ˜ë¡œ í™œìš©í•˜ì„¸ìš”.")

    print("\n" + "=" * 80)

    # 3ë‹¨ê³„: ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ ì‹¤í–‰
    if len(top_features) > 0:
        binned_results = {}

        for i, feature in enumerate(top_features, 1):
            print(f"\n{'='*80}")
            feat_short = feature[:70] if len(feature) > 70 else feature
            print(f"[{i}/{len(top_features)}] {feat_short} ë¶„ì„ ì¤‘...")
            print(f"{'='*80}")

            result = analyze_nonlinear_relationship(df, feature, TARGET_COL, n_bins=10)

            if result is not None and len(result) > 1:  # ìµœì†Œ 2ê°œ ì´ìƒì˜ êµ¬ê°„
                binned_results[feature] = result
            else:
                print(f"âš ï¸  {feat_short}: êµ¬ê°„ì´ ì¶©ë¶„íˆ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")

            print(f"{'='*80}\n")

        print(f"\nâœ… ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ ì™„ë£Œ: {len(binned_results)}ê°œ ë³€ìˆ˜")

        # ë¶„ì„ ê²°ê³¼ ìš”ì•½
        if len(binned_results) > 0:
            print("\n" + "=" * 80)
            print("ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ ê²°ê³¼ ìš”ì•½")
            print("=" * 80)
            for var_name, result in binned_results.items():
                var_short = var_name[:60] if len(var_name) > 60 else var_name
                max_rate = result['default_rate'].max()
                min_rate = result['default_rate'].min()
                rate_diff = (max_rate - min_rate) * 100
                print(f"\nâ€¢ {var_short}")
                print(f"  - ìµœê³  ë¶€ë„ìœ¨: {max_rate*100:.2f}%")
                print(f"  - ìµœì € ë¶€ë„ìœ¨: {min_rate*100:.2f}%")
                print(f"  - ë¶€ë„ìœ¨ ì°¨ì´: {rate_diff:.2f}%p")
            print("\n" + "=" * 80)
    else:
        print("\nâš ï¸  ë¶„ì„í•  ë³€ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.")

else:
    print("âš ï¸  íƒ€ê²Ÿ ë³€ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
================================================================================
ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ì„ ìœ„í•œ ë³€ìˆ˜ ì„ íƒ
================================================================================

âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                                         | ì œì™¸: ê³ ìœ ê°’ 9ê°œ, ë¹„0ë¹„ìœ¨ 0.6%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                             | ì œì™¸: ë¹„0ë¹„ìœ¨ 1.0%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                             | ì œì™¸: ë¹„0ë¹„ìœ¨ 1.5%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(1ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                              | ì œì™¸: ë¹„0ë¹„ìœ¨ 2.2%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                                         | ì œì™¸: ë¹„0ë¹„ìœ¨ 0.6%
âœ“ ìƒì¥íì§€ì¼ì                                                       | ê³ ìœ ê°’:    41, ë¹„0ë¹„ìœ¨: 100.0%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                                | ì œì™¸: ë¹„0ë¹„ìœ¨ 1.0%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                                | ì œì™¸: ë¹„0ë¹„ìœ¨ 1.5%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                                    | ì œì™¸: ê³ ìœ ê°’ 7ê°œ, ë¹„0ë¹„ìœ¨ 0.2%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ì´ìì—°ì²´)(ë¯¸í•´ì œ)                              | ì œì™¸: ê³ ìœ ê°’ 5ê°œ, ë¹„0ë¹„ìœ¨ 0.1%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)                      | ì œì™¸: ê³ ìœ ê°’ 7ê°œ, ë¹„0ë¹„ìœ¨ 0.9%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)                     | ì œì™¸: ê³ ìœ ê°’ 6ê°œ, ë¹„0ë¹„ìœ¨ 0.5%
âœ“ ê¸°ì—…ì‹ ìš©í‰ê°€ë“±ê¸‰(êµ¬ê°„í™”)                                                | ê³ ìœ ê°’:    11, ë¹„0ë¹„ìœ¨:  99.9%
âœ— ì‹ ìš©ë„íŒë‹¨ì •ë³´ê³µê³µì •ë³´ê±´ìˆ˜(CIS)(ë¯¸í•´ì œ)                                      | ì œì™¸: ê³ ìœ ê°’ 6ê°œ, ë¹„0ë¹„ìœ¨ 0.6%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)                                    | ì œì™¸: ê³ ìœ ê°’ 8ê°œ, ë¹„0ë¹„ìœ¨ 0.2%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)                     | ì œì™¸: ê³ ìœ ê°’ 9ê°œ, ë¹„0ë¹„ìœ¨ 0.5%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬30ì¼ì´ìƒì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(í•´ì œí¬í•¨)                                   | ì œì™¸: ë¹„0ë¹„ìœ¨ 2.4%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)                     | ì œì™¸: ê³ ìœ ê°’ 5ê°œ, ë¹„0ë¹„ìœ¨ 0.2%
âœ— ì‹ ìš©ë„íŒë‹¨ê³µê³µì •ë³´ê±´ìˆ˜(CIS)(5ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)                                | ì œì™¸: ë¹„0ë¹„ìœ¨ 0.7%
âœ— ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)                      | ì œì™¸: ë¹„0ë¹„ìœ¨ 0.9%

================================================================================
ìµœì¢… ì„ íƒëœ ë³€ìˆ˜: 2ê°œ
================================================================================
  1. ìƒì¥íì§€ì¼ì
     ìƒê´€ê³„ìˆ˜: 0.2161
  2. ê¸°ì—…ì‹ ìš©í‰ê°€ë“±ê¸‰(êµ¬ê°„í™”)
     ìƒê´€ê³„ìˆ˜: 0.1543

================================================================================

================================================================================
[1/2] ìƒì¥íì§€ì¼ì ë¶„ì„ ì¤‘...
================================================================================

```

```
================================================================================


================================================================================
[2/2] ê¸°ì—…ì‹ ìš©í‰ê°€ë“±ê¸‰(êµ¬ê°„í™”) ë¶„ì„ ì¤‘...
================================================================================

```

```
================================================================================


âœ… ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ ì™„ë£Œ: 2ê°œ ë³€ìˆ˜

================================================================================
ë¹„ì„ í˜• ê´€ê³„ ë¶„ì„ ê²°ê³¼ ìš”ì•½
================================================================================

â€¢ ìƒì¥íì§€ì¼ì
  - ìµœê³  ë¶€ë„ìœ¨: 25.00%
  - ìµœì € ë¶€ë„ìœ¨: 0.00%
  - ë¶€ë„ìœ¨ ì°¨ì´: 25.00%p

â€¢ ê¸°ì—…ì‹ ìš©í‰ê°€ë“±ê¸‰(êµ¬ê°„í™”)
  - ìµœê³  ë¶€ë„ìœ¨: 8.10%
  - ìµœì € ë¶€ë„ìœ¨: 0.08%
  - ë¶€ë„ìœ¨ ì°¨ì´: 8.02%p

================================================================================

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #7]

## 5. ì´ìë³´ìƒë°°ìœ¨ ì‹¬í™” ë¶„ì„

### ì´ìë³´ìƒë°°ìœ¨ (Interest Coverage Ratio, ICR)
```
ICR = ì˜ì—…ì´ìµ / ì´ìë¹„ìš©
```

**í•´ì„ ê¸°ì¤€:**
- **ICR â‰¥ 1.5**: ì•ˆì •ì  âœ… (ì´ì 1.5ë°° ì´ìƒ ë²Œì–´ë“¤ì„)
- **1.0 â‰¤ ICR < 1.5**: ì£¼ì˜ âš ï¸ (ì´ìëŠ” ë‚´ì§€ë§Œ ì—¬ìœ  ì—†ìŒ)
- **ICR < 1.0**: ì¢€ë¹„ ê¸°ì—… âŒ (ì˜ì—…ì´ìµìœ¼ë¡œ ì´ìë„ ëª» ëƒ„)
- **ICR < 0**: ì˜ì—…ì†ì‹¤ ğŸ’€

### ì¢€ë¹„ ê¸°ì—… (Zombie Company)
ì˜ì—…í™œë™ìœ¼ë¡œ ë²ˆ ëˆì´ ì´ìë¹„ìš©ë³´ë‹¤ ì ì–´ì„œ ë¹šë§Œ ëŠ˜ì–´ë‚˜ëŠ” ê¸°ì—…. ë¶€ë„ ìœ„í—˜ì´ ë§¤ìš° ë†’ìŒ.

--------------------------------------------------------------------------------

## [ì½”ë“œ #9]

```python
# ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚°ì„ ìœ„í•œ ë³€ìˆ˜ íƒìƒ‰
operating_income_cols = [col for col in df.columns if 'ì˜ì—…ì´ìµ' in col or 'operating' in col.lower() and 'income' in col.lower()]
interest_expense_cols = [col for col in df.columns if 'ì´ìë¹„ìš©' in col or ('interest' in col.lower() and 'expense' in col.lower())]

print("=== ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚°ì„ ìœ„í•œ ë³€ìˆ˜ íƒìƒ‰ ===")
print(f"\nì˜ì—…ì´ìµ ê´€ë ¨ ì»¬ëŸ¼ ({len(operating_income_cols)}ê°œ):")
for col in operating_income_cols[:5]:
    print(f"  â€¢ {col}")
if len(operating_income_cols) > 5:
    print(f"  ... ì™¸ {len(operating_income_cols)-5}ê°œ")

print(f"\nì´ìë¹„ìš© ê´€ë ¨ ì»¬ëŸ¼ ({len(interest_expense_cols)}ê°œ):")
for col in interest_expense_cols[:5]:
    print(f"  â€¢ {col}")
if len(interest_expense_cols) > 5:
    print(f"  ... ì™¸ {len(interest_expense_cols)-5}ê°œ")
    
# ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚°
if operating_income_cols and interest_expense_cols:
    op_income_col = operating_income_cols[0]
    interest_col = interest_expense_cols[0]

    print(f"\\nâœ“ ì„ íƒëœ ì»¬ëŸ¼:")
    print(f"  â€¢ ì˜ì—…ì´ìµ: {op_income_col}")
    print(f"  â€¢ ì´ìë¹„ìš©: {interest_col}")

    # [ìˆ˜ì •] ë„ë©”ì¸ ì§€ì‹ì„ ë°˜ì˜í•œ ICR ê³„ì‚° í•¨ìˆ˜
    def calculate_icr_domain(row):
        op = row[op_income_col]
        intr = row[interest_col]
        
        # 1. ì´ìë¹„ìš©ì´ 0 ì´í•˜ (ë¬´ì°¨ì… or ì´ììˆ˜ìµ) -> ìƒí™˜ëŠ¥ë ¥ ìµœìƒ (100ë°° ë¶€ì—¬)
        if intr <= 0:
            return 100.0
        
        # 2. ì •ìƒ ê³„ì‚°
        icr = op / intr
        
        # 3. ì´ìƒì¹˜(Outlier) ì œì–´: -100 ~ 100 ì‚¬ì´ë¡œ Clipping
        if icr > 100: return 100.0
        if icr < -100: return -100.0
        
        return icr

    df['ì´ìë³´ìƒë°°ìœ¨_ICR'] = df.apply(calculate_icr_domain, axis=1)

    print(f"\\nâœ… ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚° ì™„ë£Œ (ë¬´ì°¨ì… ê²½ì˜ ë³´ì • ì ìš©)")
    print(f"\nâœ… ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚° ì™„ë£Œ")
    print(f"  â€¢ ìœ íš¨ ë°ì´í„°: {df['ì´ìë³´ìƒë°°ìœ¨_ICR'].notna().sum():,}ê°œ ({df['ì´ìë³´ìƒë°°ìœ¨_ICR'].notna().sum()/len(df)*100:.1f}%)")
    print(f"  â€¢ í‰ê· : {df['ì´ìë³´ìƒë°°ìœ¨_ICR'].mean():.2f}")
    print(f"  â€¢ ì¤‘ì•™ê°’: {df['ì´ìë³´ìƒë°°ìœ¨_ICR'].median():.2f}")
    print(f"  â€¢ í‘œì¤€í¸ì°¨: {df['ì´ìë³´ìƒë°°ìœ¨_ICR'].std():.2f}")
else:
    print("\nâš ï¸  ì˜ì—…ì´ìµ ë˜ëŠ” ì´ìë¹„ìš© ì»¬ëŸ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    print("   ìˆ˜ë™ìœ¼ë¡œ ì»¬ëŸ¼ëª…ì„ ì§€ì •í•´ì£¼ì„¸ìš”:")
    print("   op_income_col = 'YOUR_COLUMN_NAME'")
    print("   interest_col = 'YOUR_COLUMN_NAME'")
```

**ì¶œë ¥:**

```
=== ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚°ì„ ìœ„í•œ ë³€ìˆ˜ íƒìƒ‰ ===

ì˜ì—…ì´ìµ ê´€ë ¨ ì»¬ëŸ¼ (4ê°œ):
  â€¢ ì „ê¸°ì˜ì—…ì´ìµ
  â€¢ ì˜ì—…ì´ìµì´ìë³´ìƒë°°ìœ¨
  â€¢ ì¬ë¬´ë¹„ìœ¨_ì˜ì—…ì´ìµìœ¨
  â€¢ ì˜ì—…ì´ìµì¦ê°€ìœ¨

ì´ìë¹„ìš© ê´€ë ¨ ì»¬ëŸ¼ (1ê°œ):
  â€¢ ì´ìë¹„ìš©
\nâœ“ ì„ íƒëœ ì»¬ëŸ¼:
  â€¢ ì˜ì—…ì´ìµ: ì „ê¸°ì˜ì—…ì´ìµ
  â€¢ ì´ìë¹„ìš©: ì´ìë¹„ìš©
\nâœ… ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚° ì™„ë£Œ (ë¬´ì°¨ì… ê²½ì˜ ë³´ì • ì ìš©)

âœ… ì´ìë³´ìƒë°°ìœ¨ ê³„ì‚° ì™„ë£Œ
  â€¢ ìœ íš¨ ë°ì´í„°: 50,105ê°œ (100.0%)
  â€¢ í‰ê· : 20.89
  â€¢ ì¤‘ì•™ê°’: 4.21
  â€¢ í‘œì¤€í¸ì°¨: 45.34

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #10]

```python
# ì¢€ë¹„ ê¸°ì—… ì‹ë³„ ë° ë¶„ì„
if 'ì´ìë³´ìƒë°°ìœ¨_ICR' in df.columns:
    # ICR ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
    def categorize_icr(icr):
        if pd.isna(icr):
            return 'ë°ì´í„° ì—†ìŒ'
        elif icr < 0:
            return 'ì˜ì—…ì†ì‹¤ (<0)'
        elif icr < 1.0:
            return 'ì¢€ë¹„ ê¸°ì—… (<1.0)'
        elif icr < 1.5:
            return 'ì£¼ì˜ (1.0~1.5)'
        else:
            return 'ì•ˆì • (â‰¥1.5)'

    df['ICR_ì¹´í…Œê³ ë¦¬'] = df['ì´ìë³´ìƒë°°ìœ¨_ICR'].apply(categorize_icr)

    # ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
    icr_stats = df.groupby('ICR_ì¹´í…Œê³ ë¦¬').agg({
        TARGET_COL: ['count', 'sum', 'mean']
    }).round(4)

    icr_stats.columns = ['ê¸°ì—… ìˆ˜', 'ë¶€ë„ ê¸°ì—… ìˆ˜', 'ë¶€ë„ìœ¨']

    # ì¹´í…Œê³ ë¦¬ ìˆœì„œ ì •ë ¬
    category_order = ['ì˜ì—…ì†ì‹¤ (<0)', 'ì¢€ë¹„ ê¸°ì—… (<1.0)', 'ì£¼ì˜ (1.0~1.5)', 'ì•ˆì • (â‰¥1.5)', 'ë°ì´í„° ì—†ìŒ']
    icr_stats = icr_stats.reindex([cat for cat in category_order if cat in icr_stats.index])

    print("=== ì´ìë³´ìƒë°°ìœ¨ ì¹´í…Œê³ ë¦¬ë³„ ë¶€ë„ìœ¨ ===")
    print(icr_stats)

    # Plotly ì‹œê°í™” (1x2) - ë ˆì´ì•„ì›ƒ ê°œì„ 
    fig = make_subplots(
        rows=1, cols=2,
        subplot_titles=['ì´ìë³´ìƒë°°ìœ¨ ì¹´í…Œê³ ë¦¬ë³„ ë¶€ë„ìœ¨', 'ì´ìë³´ìƒë°°ìœ¨ ì¹´í…Œê³ ë¦¬ë³„ ê¸°ì—… ë¶„í¬'],
        horizontal_spacing=0.18  # ê°„ê²© ì¦ê°€
    )

    # ìƒ‰ìƒ ë§¤í•‘
    color_map = {
        'ì˜ì—…ì†ì‹¤ (<0)': 'darkred',
        'ì¢€ë¹„ ê¸°ì—… (<1.0)': 'red',
        'ì£¼ì˜ (1.0~1.5)': 'orange',
        'ì•ˆì • (â‰¥1.5)': 'lightgreen',
        'ë°ì´í„° ì—†ìŒ': 'lightgray'
    }
    colors = [color_map.get(cat, 'gray') for cat in icr_stats.index]

    # Yì¶• ë ˆì´ë¸” ë‹¨ì¶•
    y_labels_short = []
    for label in icr_stats.index:
        if '(' in label:
            # ê´„í˜¸ ì•ë¶€ë¶„ë§Œ ì‚¬ìš©
            short = label.split('(')[0].strip()
        else:
            short = label
        y_labels_short.append(short)

    # 1) ë¶€ë„ìœ¨ ë§‰ëŒ€ê·¸ë˜í”„
    fig.add_trace(go.Bar(
        y=y_labels_short,
        x=icr_stats['ë¶€ë„ìœ¨'],
        orientation='h',
        marker_color=colors,
        text=[f"{rate*100:.2f}%<br>n={cnt:,}"
              for rate, cnt in zip(icr_stats['ë¶€ë„ìœ¨'], icr_stats['ê¸°ì—… ìˆ˜'])],
        textposition='outside',
        hovertemplate='ì¹´í…Œê³ ë¦¬: %{customdata}<br>ë¶€ë„ìœ¨: %{x:.2%}<extra></extra>',
        customdata=icr_stats.index,  # ì „ì²´ ì´ë¦„ì€ í˜¸ë²„ì— í‘œì‹œ
        showlegend=False
    ), row=1, col=1)

    # 2) ê¸°ì—… ë¶„í¬ ë§‰ëŒ€ê·¸ë˜í”„
    fig.add_trace(go.Bar(
        y=y_labels_short,
        x=icr_stats['ê¸°ì—… ìˆ˜'],
        orientation='h',
        marker_color=colors,
        marker_opacity=0.7,
        text=[f"{cnt:,}" for cnt in icr_stats['ê¸°ì—… ìˆ˜']],
        textposition='outside',
        hovertemplate='ì¹´í…Œê³ ë¦¬: %{customdata}<br>ê¸°ì—… ìˆ˜: %{x:,}<extra></extra>',
        customdata=icr_stats.index,  # ì „ì²´ ì´ë¦„ì€ í˜¸ë²„ì— í‘œì‹œ
        showlegend=False
    ), row=1, col=2)

    fig.update_xaxes(title_text="ë¶€ë„ìœ¨", row=1, col=1)
    fig.update_xaxes(title_text="ê¸°ì—… ìˆ˜", row=1, col=2)

    # Yì¶• ì œëª© ì œê±°í•˜ì—¬ ê²¹ì¹¨ ë°©ì§€
    fig.update_yaxes(title_text="", row=1, col=1)
    fig.update_yaxes(title_text="", row=1, col=2)

    # ë†’ì´ ìë™ ì¡°ì •
    chart_height = max(500, len(icr_stats) * 80)

    fig.update_layout(
        height=chart_height,
        title_text="ì´ìë³´ìƒë°°ìœ¨ ì¹´í…Œê³ ë¦¬ ë¶„ì„",
        title_x=0.5,
        showlegend=False,
        margin=dict(l=100, r=180, t=100, b=80),  # ì—¬ë°± ìµœì í™”
        font=dict(size=11)
    )

    # Yì¶• í…ìŠ¤íŠ¸ ì„¤ì •
    fig.update_yaxes(tickfont=dict(size=10), row=1, col=1)
    fig.update_yaxes(tickfont=dict(size=10), row=1, col=2)

    fig.show()

    # ì¢€ë¹„ ê¸°ì—… ì‹¬ì¸µ ë¶„ì„
    zombie_mask = df['ICR_ì¹´í…Œê³ ë¦¬'] == 'ì¢€ë¹„ ê¸°ì—… (<1.0)'
    n_zombie = zombie_mask.sum()
    zombie_default_rate = df[zombie_mask][TARGET_COL].mean()
    avg_default_rate = df[TARGET_COL].mean()

    print(f"\n{'='*60}")
    print("ì¢€ë¹„ ê¸°ì—… ì‹¬ì¸µ ë¶„ì„")
    print(f"{'='*60}")
    print(f"âœ“ ì¢€ë¹„ ê¸°ì—… ìˆ˜: {n_zombie:,}ê°œ ({n_zombie/len(df)*100:.2f}%)")
    print(f"âœ“ ì¢€ë¹„ ê¸°ì—… ë¶€ë„ìœ¨: {zombie_default_rate*100:.2f}%")
    print(f"âœ“ ì „ì²´ í‰ê·  ë¶€ë„ìœ¨: {avg_default_rate*100:.2f}%")
    print(f"âœ“ ë¶€ë„ ìœ„í—˜ ë°°ìœ¨: {zombie_default_rate/avg_default_rate:.2f}x")
    print(f"{'='*60}")
else:
    print("âš ï¸  ì´ìë³´ìƒë°°ìœ¨ì´ ê³„ì‚°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
=== ì´ìë³´ìƒë°°ìœ¨ ì¹´í…Œê³ ë¦¬ë³„ ë¶€ë„ìœ¨ ===
               ê¸°ì—… ìˆ˜  ë¶€ë„ ê¸°ì—… ìˆ˜  ë¶€ë„ìœ¨
ICR_ì¹´í…Œê³ ë¦¬                         
ì˜ì—…ì†ì‹¤ (<0)     12949      254 0.02
ì¢€ë¹„ ê¸°ì—… (<1.0)   4805       97 0.02
ì£¼ì˜ (1.0~1.5)   1686       24 0.01
ì•ˆì • (â‰¥1.5)     30665      384 0.01

```

```

============================================================
ì¢€ë¹„ ê¸°ì—… ì‹¬ì¸µ ë¶„ì„
============================================================
âœ“ ì¢€ë¹„ ê¸°ì—… ìˆ˜: 4,805ê°œ (9.59%)
âœ“ ì¢€ë¹„ ê¸°ì—… ë¶€ë„ìœ¨: 2.02%
âœ“ ì „ì²´ í‰ê·  ë¶€ë„ìœ¨: 1.51%
âœ“ ë¶€ë„ ìœ„í—˜ ë°°ìœ¨: 1.33x
============================================================

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #11]

```python
# ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ ë¶„ì„
industry_cols = [col for col in df.columns if 'ì—…ì¢…' in col or 'industry' in col.lower() or 'ksic' in col.lower()]

if industry_cols and 'ì´ìë³´ìƒë°°ìœ¨_ICR' in df.columns:
    industry_col = industry_cols[0]

    print(f"ì‚¬ìš©í•  ì—…ì¢… ì»¬ëŸ¼: {industry_col}")

    # ì—…ì¢…ë³„ í‰ê·  ICR ë° ë¶€ë„ìœ¨
    industry_icr = df.groupby(industry_col).agg({
        'ì´ìë³´ìƒë°°ìœ¨_ICR': ['mean', 'median'],
        TARGET_COL: ['count', 'mean']
    }).round(2)

    industry_icr.columns = ['í‰ê· _ICR', 'ì¤‘ì•™_ICR', 'ê¸°ì—…ìˆ˜', 'ë¶€ë„ìœ¨']
    industry_icr = industry_icr[industry_icr['ê¸°ì—…ìˆ˜'] >= 30]  # ìµœì†Œ 30ê°œ ê¸°ì—…
    industry_icr = industry_icr.sort_values('ë¶€ë„ìœ¨', ascending=False).head(15)

    print("\n=== ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ ë° ë¶€ë„ìœ¨ (ìƒìœ„ 15ê°œ) ===")
    print(industry_icr)

    # Plotly ë³µí•© ì°¨íŠ¸ (ë§‰ëŒ€ + ë¼ì¸)
    fig = go.Figure()

    # í‰ê·  ICR (ë§‰ëŒ€)
    fig.add_trace(go.Bar(
        x=industry_icr.index,
        y=industry_icr['í‰ê· _ICR'],
        name='í‰ê·  ICR',
        marker_color='steelblue',
        opacity=0.7,
        yaxis='y',
        hovertemplate='ì—…ì¢…: %{x}<br>í‰ê·  ICR: %{y:.2f}<extra></extra>'
    ))

    # ë¶€ë„ìœ¨ (ë¼ì¸, ì˜¤ë¥¸ìª½ ì¶•)
    fig.add_trace(go.Scatter(
        x=industry_icr.index,
        y=industry_icr['ë¶€ë„ìœ¨'] * 100,
        name='ë¶€ë„ìœ¨',
        mode='lines+markers',
        marker=dict(color='coral', size=8),
        line=dict(color='coral', width=3),
        yaxis='y2',
        hovertemplate='ì—…ì¢…: %{x}<br>ë¶€ë„ìœ¨: %{y:.2f}%<extra></extra>'
    ))

    # ë ˆì´ì•„ì›ƒ
    fig.update_layout(
        title='ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ vs ë¶€ë„ìœ¨',
        title_x=0.5,
        xaxis=dict(title='ì—…ì¢…', tickangle=-45),
        yaxis=dict(
            title='í‰ê·  ì´ìë³´ìƒë°°ìœ¨',
            side='left',
            showgrid=False
        ),
        yaxis2=dict(
            title='ë¶€ë„ìœ¨ (%)',
            side='right',
            overlaying='y',
            showgrid=False
        ),
        height=600,
        width=1200,
        legend=dict(
            orientation="h",
            yanchor="bottom",
            y=1.02,
            xanchor="center",
            x=0.5
        ),
        margin=dict(l=80, r=80, t=100, b=150),
        hovermode='x unified'
    )

    fig.show()

    print(f"\nâœ… ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ ë¶„ì„ ì™„ë£Œ")
else:
    print("âš ï¸  ì—…ì¢… ì •ë³´ ë˜ëŠ” ì´ìë³´ìƒë°°ìœ¨ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
ì‚¬ìš©í•  ì—…ì¢… ì»¬ëŸ¼: ì—…ì¢…(ì¤‘ë¶„ë¥˜)

=== ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ ë° ë¶€ë„ìœ¨ (ìƒìœ„ 15ê°œ) ===
         í‰ê· _ICR  ì¤‘ì•™_ICR   ê¸°ì—…ìˆ˜  ë¶€ë„ìœ¨
ì—…ì¢…(ì¤‘ë¶„ë¥˜)                           
A01       18.78    2.42   384 0.04
C11       20.81    2.32   127 0.03
I56       22.44    4.96   561 0.03
J59       23.34    3.84   220 0.03
L68       13.52    0.90  2459 0.03
J63       28.82    9.96   215 0.03
S94       25.09    5.52    72 0.03
M71       29.17   11.57  1018 0.02
M73       24.22    5.93   347 0.02
C25       15.08    2.46  1842 0.02
R91       20.87    2.58   463 0.02
H52       25.48    6.00   661 0.02
H50       14.30    2.05   123 0.02
G47       23.49    6.27  3699 0.02
F42       28.85    9.89  3571 0.02

```

```

âœ… ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ ë¶„ì„ ì™„ë£Œ

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #8]

## 6. í˜„ê¸ˆíë¦„ ì„¸ë¶€ ë¶„ì„

### í˜„ê¸ˆíë¦„í‘œ 3ëŒ€ í™œë™

| í™œë™ | ì„¤ëª… | ì–‘ìˆ˜(+) | ìŒìˆ˜(-) |
|------|------|---------|---------|
| **ì˜ì—…í™œë™ (OCF)** | í•µì‹¬ ì‚¬ì—… í˜„ê¸ˆíë¦„ | ì‚¬ì—…ì´ í˜„ê¸ˆ ì°½ì¶œ âœ… | ì‚¬ì—…ì´ í˜„ê¸ˆ ì†Œì§„ âŒ |
| **íˆ¬ìí™œë™ (ICF)** | ìì‚° ì·¨ë“/ì²˜ë¶„ | ìì‚° ë§¤ê° (êµ¬ì¡°ì¡°ì •) | íˆ¬ì í™•ëŒ€ (ì„±ì¥) |
| **ì¬ë¬´í™œë™ (FCF)** | ìê¸ˆ ì¡°ë‹¬/ìƒí™˜ | ì°¨ì…/ì¦ì | ìƒí™˜/ë°°ë‹¹ |

### ê¸°ì—… ìƒì• ì£¼ê¸° íŒ¨í„´

| ë‹¨ê³„ | OCF | ICF | FCF | íŠ¹ì§• |
|------|-----|-----|-----|------|
| **ë„ì…ê¸°** | â– | â– | â• | ì‚¬ì—… ì´ˆê¸°, ìê¸ˆ ì¡°ë‹¬ ì¤‘ |
| **ì„±ì¥ê¸°** | â• | â– | â• | ìˆ˜ìµ ë°œìƒ, ì ê·¹ íˆ¬ì |
| **ì„±ìˆ™ê¸°** | â• | â– | â– | ì•ˆì •ì  ìˆ˜ìµ, ë°°ë‹¹ ì¦ê°€ |
| **ì‡ í‡´ê¸°** | â– | â• | â– | ì‚¬ì—… ì¶•ì†Œ, ìì‚° ë§¤ê° |

--------------------------------------------------------------------------------

## [ì½”ë“œ #12]

```python
# í˜„ê¸ˆíë¦„ ê´€ë ¨ ë³€ìˆ˜ íƒìƒ‰
cf_cols = {
    'operating': [col for col in df.columns if 'ì˜ì—…í™œë™' in col and 'í˜„ê¸ˆ' in col],
    'investing': [col for col in df.columns if 'íˆ¬ìí™œë™' in col and 'í˜„ê¸ˆ' in col],
    'financing': [col for col in df.columns if 'ì¬ë¬´í™œë™' in col and 'í˜„ê¸ˆ' in col]
}

print("=== í˜„ê¸ˆíë¦„ ê´€ë ¨ ë³€ìˆ˜ íƒìƒ‰ ===")
for cf_type, cols in cf_cols.items():
    print(f"\n{cf_type.upper()} ({len(cols)}ê°œ):")
    for col in cols[:3]:
        print(f"  â€¢ {col}")
    if len(cols) > 3:
        print(f"  ... ì™¸ {len(cols)-3}ê°œ")

# í˜„ê¸ˆíë¦„ ë³€ìˆ˜ ì„¤ì •
ocf_col = cf_cols['operating'][0] if cf_cols['operating'] else None
icf_col = cf_cols['investing'][0] if cf_cols['investing'] else None
fcf_col = cf_cols['financing'][0] if cf_cols['financing'] else None

if ocf_col and icf_col and fcf_col:
    print(f"\nâœ“ ì„ íƒëœ í˜„ê¸ˆíë¦„ ë³€ìˆ˜:")
    print(f"  â€¢ ì˜ì—…í™œë™: {ocf_col}")
    print(f"  â€¢ íˆ¬ìí™œë™: {icf_col}")
    print(f"  â€¢ ì¬ë¬´í™œë™: {fcf_col}")

    # í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ë¥˜
    def classify_cashflow_pattern(row):
        ocf = row[ocf_col]
        icf = row[icf_col]
        fcf = row[fcf_col]

        if pd.isna(ocf) or pd.isna(icf) or pd.isna(fcf):
            return 'ë°ì´í„° ì—†ìŒ'

        # íŒ¨í„´ ë¶„ë¥˜
        if ocf > 0 and icf < 0 and fcf < 0:
            return 'ì„±ìˆ™ê¸° (OCF+, ICF-, FCF-)'
        elif ocf > 0 and icf < 0 and fcf > 0:
            return 'ì„±ì¥ê¸° (OCF+, ICF-, FCF+)'
        elif ocf < 0 and icf < 0 and fcf > 0:
            return 'ë„ì…ê¸° (OCF-, ICF-, FCF+)'
        elif ocf < 0 and icf > 0 and fcf < 0:
            return 'ì‡ í‡´ê¸° (OCF-, ICF+, FCF-)'
        else:
            return 'ê¸°íƒ€ íŒ¨í„´'

    df['í˜„ê¸ˆíë¦„_íŒ¨í„´'] = df.apply(classify_cashflow_pattern, axis=1)

    print("\nâœ… í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ë¥˜ ì™„ë£Œ")
    print(f"  â€¢ íŒ¨í„´ ì¹´í…Œê³ ë¦¬: {df['í˜„ê¸ˆíë¦„_íŒ¨í„´'].nunique()}ê°œ")
else:
    print("\nâš ï¸  í˜„ê¸ˆíë¦„ ë³€ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    print("   ìˆ˜ë™ìœ¼ë¡œ ì§€ì •í•´ì£¼ì„¸ìš”:")
    print("   ocf_col = 'YOUR_OPERATING_CF_COLUMN'")
    print("   icf_col = 'YOUR_INVESTING_CF_COLUMN'")
    print("   fcf_col = 'YOUR_FINANCING_CF_COLUMN'")
```

**ì¶œë ¥:**

```
=== í˜„ê¸ˆíë¦„ ê´€ë ¨ ë³€ìˆ˜ íƒìƒ‰ ===

OPERATING (1ê°œ):
  â€¢ ì˜ì—…í™œë™í˜„ê¸ˆíë¦„

INVESTING (1ê°œ):
  â€¢ íˆ¬ìí™œë™í˜„ê¸ˆíë¦„

FINANCING (1ê°œ):
  â€¢ ì¬ë¬´í™œë™í˜„ê¸ˆíë¦„

âœ“ ì„ íƒëœ í˜„ê¸ˆíë¦„ ë³€ìˆ˜:
  â€¢ ì˜ì—…í™œë™: ì˜ì—…í™œë™í˜„ê¸ˆíë¦„
  â€¢ íˆ¬ìí™œë™: íˆ¬ìí™œë™í˜„ê¸ˆíë¦„
  â€¢ ì¬ë¬´í™œë™: ì¬ë¬´í™œë™í˜„ê¸ˆíë¦„

âœ… í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ë¥˜ ì™„ë£Œ
  â€¢ íŒ¨í„´ ì¹´í…Œê³ ë¦¬: 5ê°œ

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #13]

```python
# í˜„ê¸ˆíë¦„ íŒ¨í„´ë³„ ë¶€ë„ìœ¨ ë¶„ì„ (Plotly)
if 'í˜„ê¸ˆíë¦„_íŒ¨í„´' in df.columns:
    cf_pattern_stats = df.groupby('í˜„ê¸ˆíë¦„_íŒ¨í„´').agg({
        TARGET_COL: ['count', 'sum', 'mean']
    }).round(4)

    cf_pattern_stats.columns = ['ê¸°ì—… ìˆ˜', 'ë¶€ë„ ê¸°ì—… ìˆ˜', 'ë¶€ë„ìœ¨']
    cf_pattern_stats = cf_pattern_stats.sort_values('ë¶€ë„ìœ¨', ascending=False)

    print("=== í˜„ê¸ˆíë¦„ íŒ¨í„´ë³„ ë¶€ë„ìœ¨ ===")
    print(cf_pattern_stats)

    # Plotly ì‹œê°í™” (1x2) - ë ˆì´ì•„ì›ƒ ê°œì„ 
    fig = make_subplots(
        rows=1, cols=2,
        subplot_titles=['í˜„ê¸ˆíë¦„ íŒ¨í„´ë³„ ë¶€ë„ìœ¨', 'í˜„ê¸ˆíë¦„ íŒ¨í„´ë³„ ê¸°ì—… ë¶„í¬'],
        horizontal_spacing=0.20  # ê°„ê²© ì¦ê°€
    )

    # ìƒ‰ìƒ ë§¤í•‘
    color_map = {
        'ì˜ì—…ì†ì‹¤ (<0)': 'darkred',
        'ì‡ í‡´ê¸° (OCF-, ICF+, FCF-)': 'red',
        'ë„ì…ê¸° (OCF-, ICF-, FCF+)': 'orange',
        'ì„±ì¥ê¸° (OCF+, ICF-, FCF+)': 'lightgreen',
        'ì„±ìˆ™ê¸° (OCF+, ICF-, FCF-)': 'green',
        'ê¸°íƒ€ íŒ¨í„´': 'gray',
        'ë°ì´í„° ì—†ìŒ': 'lightgray'
    }
    colors = [color_map.get(pat, 'gray') for pat in cf_pattern_stats.index]

    # Yì¶• ë ˆì´ë¸” ë‹¨ì¶• (ê´„í˜¸ ë‚´ìš© ì œê±°í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ)
    y_labels_short = []
    for label in cf_pattern_stats.index:
        if '(' in label:
            # ê´„í˜¸ ì•ë¶€ë¶„ë§Œ ì‚¬ìš©
            short = label.split('(')[0].strip()
        else:
            short = label
        y_labels_short.append(short)

    # 1) ë¶€ë„ìœ¨
    fig.add_trace(go.Bar(
        y=y_labels_short,
        x=cf_pattern_stats['ë¶€ë„ìœ¨'],
        orientation='h',
        marker_color=colors,
        text=[f"{rate*100:.2f}%<br>n={cnt:,}"
              for rate, cnt in zip(cf_pattern_stats['ë¶€ë„ìœ¨'], cf_pattern_stats['ê¸°ì—… ìˆ˜'])],
        textposition='outside',
        hovertemplate='íŒ¨í„´: %{customdata}<br>ë¶€ë„ìœ¨: %{x:.2%}<extra></extra>',
        customdata=cf_pattern_stats.index,  # ì „ì²´ ì´ë¦„ì€ í˜¸ë²„ì— í‘œì‹œ
        showlegend=False
    ), row=1, col=1)

    # 2) ê¸°ì—… ë¶„í¬
    fig.add_trace(go.Bar(
        y=y_labels_short,
        x=cf_pattern_stats['ê¸°ì—… ìˆ˜'],
        orientation='h',
        marker_color=colors,
        marker_opacity=0.7,
        text=[f"{cnt:,}" for cnt in cf_pattern_stats['ê¸°ì—… ìˆ˜']],
        textposition='outside',
        hovertemplate='íŒ¨í„´: %{customdata}<br>ê¸°ì—… ìˆ˜: %{x:,}<extra></extra>',
        customdata=cf_pattern_stats.index,  # ì „ì²´ ì´ë¦„ì€ í˜¸ë²„ì— í‘œì‹œ
        showlegend=False
    ), row=1, col=2)

    fig.update_xaxes(title_text="ë¶€ë„ìœ¨", row=1, col=1)
    fig.update_xaxes(title_text="ê¸°ì—… ìˆ˜", row=1, col=2)
    fig.update_yaxes(title_text="í˜„ê¸ˆíë¦„ íŒ¨í„´", row=1, col=1)
    fig.update_yaxes(title_text="í˜„ê¸ˆíë¦„ íŒ¨í„´", row=1, col=2)

    # ë†’ì´ ìë™ ì¡°ì • (íŒ¨í„´ ìˆ˜ì— ë¹„ë¡€)
    chart_height = max(500, len(cf_pattern_stats) * 80)

    fig.update_layout(
        height=chart_height,  # ë™ì  ë†’ì´
        title_text="í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ì„",
        title_x=0.5,
        showlegend=False,
        margin=dict(l=120, r=200, t=100, b=80),  # ì™¼ìª½ ì—¬ë°± ì¦ê°€
        font=dict(size=11)  # í°íŠ¸ í¬ê¸° ì•½ê°„ ê°ì†Œ
    )

    # Yì¶• í…ìŠ¤íŠ¸ ì„¤ì •
    fig.update_yaxes(tickfont=dict(size=10), row=1, col=1)
    fig.update_yaxes(tickfont=dict(size=10), row=1, col=2)

    fig.show()

    # ìœ„í—˜ íŒ¨í„´ ì‹ë³„
    avg_default = df[TARGET_COL].mean()
    high_risk_patterns = cf_pattern_stats[cf_pattern_stats['ë¶€ë„ìœ¨'] > avg_default * 1.5]

    if len(high_risk_patterns) > 0:
        print(f"\n{'='*60}")
        print("ê³ ìœ„í—˜ í˜„ê¸ˆíë¦„ íŒ¨í„´")
        print(f"{'='*60}")
        print(f"ì „ì²´ í‰ê·  ë¶€ë„ìœ¨: {avg_default*100:.2f}%")
        print(f"\nê³ ìœ„í—˜ íŒ¨í„´ (í‰ê·  ëŒ€ë¹„ 1.5ë°° ì´ìƒ):")
        for pattern, row in high_risk_patterns.iterrows():
            risk_ratio = row['ë¶€ë„ìœ¨'] / avg_default
            print(f"  â€¢ {pattern}")
            print(f"    - ë¶€ë„ìœ¨: {row['ë¶€ë„ìœ¨']*100:.2f}%")
            print(f"    - ìœ„í—˜ ë°°ìœ¨: {risk_ratio:.2f}x")
            print(f"    - ê¸°ì—… ìˆ˜: {row['ê¸°ì—… ìˆ˜']:,}ê°œ")
        print(f"{'='*60}")

    print(f"\nâœ… í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ì„ ì™„ë£Œ")
else:
    print("âš ï¸  í˜„ê¸ˆíë¦„ íŒ¨í„´ì´ ë¶„ë¥˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
=== í˜„ê¸ˆíë¦„ íŒ¨í„´ë³„ ë¶€ë„ìœ¨ ===
                         ê¸°ì—… ìˆ˜  ë¶€ë„ ê¸°ì—… ìˆ˜  ë¶€ë„ìœ¨
í˜„ê¸ˆíë¦„_íŒ¨í„´                                    
ë„ì…ê¸° (OCF-, ICF-, FCF+)   2669       59 0.02
ê¸°íƒ€ íŒ¨í„´                   36936      585 0.02
ì‡ í‡´ê¸° (OCF-, ICF+, FCF-)   1099       15 0.01
ì„±ì¥ê¸° (OCF+, ICF-, FCF+)   3799       48 0.01
ì„±ìˆ™ê¸° (OCF+, ICF-, FCF-)   5602       52 0.01

```

```

âœ… í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ì„ ì™„ë£Œ

```

--------------------------------------------------------------------------------

## [ì½”ë“œ #14]

```python
# í˜„ê¸ˆíë¦„ 3ëŒ€ í™œë™ ê°„ ìƒê´€ê´€ê³„ (Plotly íˆíŠ¸ë§µ)
if ocf_col and icf_col and fcf_col:
    # ìƒê´€ê´€ê³„ ê³„ì‚°
    cf_data = df[[ocf_col, icf_col, fcf_col, TARGET_COL]].copy()
    cf_data.columns = ['ì˜ì—…í™œë™CF', 'íˆ¬ìí™œë™CF', 'ì¬ë¬´í™œë™CF', 'ë¶€ë„ì—¬ë¶€']
    cf_corr = cf_data.corr()

    print("=== í˜„ê¸ˆíë¦„ 3ëŒ€ í™œë™ ìƒê´€ê´€ê³„ ===")
    print(cf_corr)

    # Plotly íˆíŠ¸ë§µ
    fig = go.Figure(data=go.Heatmap(
        z=cf_corr.values,
        x=cf_corr.columns,
        y=cf_corr.index,
        colorscale='RdBu_r',
        zmid=0,
        zmin=-1,
        zmax=1,
        text=cf_corr.values,
        texttemplate='%{text:.3f}',
        textfont={"size": 12},
        colorbar=dict(title="ìƒê´€ê³„ìˆ˜"),
        hovertemplate='X: %{x}<br>Y: %{y}<br>ìƒê´€ê³„ìˆ˜: %{z:.3f}<extra></extra>'
    ))

    fig.update_layout(
        title='í˜„ê¸ˆíë¦„ 3ëŒ€ í™œë™ ìƒê´€ê´€ê³„',
        title_x=0.5,
        width=700,
        height=600,
        xaxis=dict(side='bottom'),
        yaxis=dict(side='left'),
        margin=dict(l=120, r=80, t=100, b=120)
    )

    fig.show()

    # ë¶€ë„ ì—¬ë¶€ì™€ì˜ ìƒê´€ê´€ê³„
    print(f"\n{'='*60}")
    print("ë¶€ë„ ì—¬ë¶€ì™€ì˜ ìƒê´€ê´€ê³„")
    print(f"{'='*60}")
    print(f"ì˜ì—…í™œë™ í˜„ê¸ˆíë¦„: {cf_corr.loc['ì˜ì—…í™œë™CF', 'ë¶€ë„ì—¬ë¶€']:7.4f}")
    print(f"íˆ¬ìí™œë™ í˜„ê¸ˆíë¦„: {cf_corr.loc['íˆ¬ìí™œë™CF', 'ë¶€ë„ì—¬ë¶€']:7.4f}")
    print(f"ì¬ë¬´í™œë™ í˜„ê¸ˆíë¦„: {cf_corr.loc['ì¬ë¬´í™œë™CF', 'ë¶€ë„ì—¬ë¶€']:7.4f}")
    print(f"{'='*60}")
else:
    print("âš ï¸  í˜„ê¸ˆíë¦„ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
```

**ì¶œë ¥:**

```
=== í˜„ê¸ˆíë¦„ 3ëŒ€ í™œë™ ìƒê´€ê´€ê³„ ===
        ì˜ì—…í™œë™CF  íˆ¬ìí™œë™CF  ì¬ë¬´í™œë™CF  ë¶€ë„ì—¬ë¶€
ì˜ì—…í™œë™CF    1.00   -0.70   -0.28 -0.00
íˆ¬ìí™œë™CF   -0.70    1.00   -0.38  0.00
ì¬ë¬´í™œë™CF   -0.28   -0.38    1.00  0.00
ë¶€ë„ì—¬ë¶€     -0.00    0.00    0.00  1.00

```

```

============================================================
ë¶€ë„ ì—¬ë¶€ì™€ì˜ ìƒê´€ê´€ê³„
============================================================
ì˜ì—…í™œë™ í˜„ê¸ˆíë¦„: -0.0044
íˆ¬ìí™œë™ í˜„ê¸ˆíë¦„:  0.0036
ì¬ë¬´í™œë™ í˜„ê¸ˆíë¦„:  0.0000
============================================================

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #9]

## 7. ë¹„ì¬ë¬´ ë° ê±°ì‹œê²½ì œ ì§€í‘œ ê²€í† 

### 7.1 ë¹„ì¬ë¬´ì  ì •ë³´
ë°ì´í„°ì…‹ì—ì„œ í™œìš© ê°€ëŠ¥í•œ ë¹„ì¬ë¬´ ì •ë³´ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.
- ì‹ ìš© ì—°ì²´ ì •ë³´
- ì™¸ë¶€ê°ì‚¬ ì—¬ë¶€
- ê¸°ì—… ê·œëª¨/ì—…ì¢…
- ê¸°íƒ€ í–‰ë™ ë°ì´í„°

### 7.2 ê±°ì‹œê²½ì œ ì§€í‘œ ì—°ê³„
ê±°ì‹œê²½ì œ ì§€í‘œë¥¼ ê²°í•©í•˜ë©´ ëª¨ë¸ ì„¤ëª…ë ¥ í–¥ìƒ:
- ê¸ˆë¦¬ (í•œêµ­ì€í–‰ ê¸°ì¤€ê¸ˆë¦¬)
- í™˜ìœ¨ (USD/KRW)
- GDP ì„±ì¥ë¥ 
- ì‚°ì—…ìƒì‚°ì§€ìˆ˜
- ì‹¤ì—…ë¥ 

**ì¡°ê±´**: ë°ì´í„°ì— ì‹œì  ì •ë³´(ì—°ë„, ë¶„ê¸°)ê°€ ìˆì–´ì•¼ í•¨

--------------------------------------------------------------------------------

## [ì½”ë“œ #15]

```python
# ë¹„ì¬ë¬´ ì •ë³´ íƒìƒ‰
print("=== ë¹„ì¬ë¬´ ì •ë³´ íƒìƒ‰ ===\n")

# 1) ì‹ ìš© ì—°ì²´ ì •ë³´
delinquency_cols = [col for col in df.columns if 'ì—°ì²´' in col or 'ì‹ ìš©' in col or 'delinq' in col.lower()]
print(f"1. ì‹ ìš© ì—°ì²´ ê´€ë ¨ ë³€ìˆ˜ ({len(delinquency_cols)}ê°œ):")
for col in delinquency_cols[:5]:
    print(f"   â€¢ {col}")
if len(delinquency_cols) > 5:
    print(f"   ... ì™¸ {len(delinquency_cols)-5}ê°œ")

# 2) ì™¸ë¶€ê°ì‚¬ ì •ë³´
audit_cols = [col for col in df.columns if 'ì™¸ê°' in col or 'ê°ì‚¬' in col or 'audit' in col.lower()]
print(f"\n2. ì™¸ë¶€ê°ì‚¬ ê´€ë ¨ ë³€ìˆ˜ ({len(audit_cols)}ê°œ):")
for col in audit_cols:
    print(f"   â€¢ {col}")

# 3) ê¸°ì—… ê·œëª¨ ì •ë³´
size_cols = [col for col in df.columns if 'ê·œëª¨' in col or 'ìì‚°ì´ê³„' in col or 'ë§¤ì¶œ' in col]
print(f"\n3. ê¸°ì—… ê·œëª¨ ê´€ë ¨ ë³€ìˆ˜ ({len(size_cols)}ê°œ):")
for col in size_cols[:5]:
    print(f"   â€¢ {col}")
if len(size_cols) > 5:
    print(f"   ... ì™¸ {len(size_cols)-5}ê°œ")

# 4) ì‹œì  ì •ë³´
time_cols = [col for col in df.columns if 'ë…„' in col or 'ì—°ë„' in col or 'year' in col.lower() or 'ë¶„ê¸°' in col]
print(f"\n4. ì‹œì  ê´€ë ¨ ë³€ìˆ˜ ({len(time_cols)}ê°œ):")
for col in time_cols:
    print(f"   â€¢ {col}")

if not time_cols:
    print("   âš ï¸  ì‹œì  ì •ë³´ê°€ ì—†ì–´ ê±°ì‹œê²½ì œ ì§€í‘œ ì—°ê²°ì´ ì–´ë µìŠµë‹ˆë‹¤.")
else:
    print("   âœ… ì‹œì  ì •ë³´ í™•ì¸ë¨. ê±°ì‹œê²½ì œ ì§€í‘œ ì—°ê³„ ê°€ëŠ¥í•©ë‹ˆë‹¤.")

print("\n" + "="*70)

# ë¹„ì¬ë¬´ ë³€ìˆ˜ ìš”ì•½
non_financial_vars = {
    'ì‹ ìš©ì—°ì²´': delinquency_cols,
    'ì™¸ë¶€ê°ì‚¬': audit_cols,
    'ê¸°ì—…ê·œëª¨': size_cols,
    'ì‹œì ': time_cols
}

total_non_financial = sum(len(cols) for cols in non_financial_vars.values())
print(f"\nâœ“ ì´ {total_non_financial}ê°œ ë¹„ì¬ë¬´ ê´€ë ¨ ë³€ìˆ˜ ì‹ë³„ë¨")
```

**ì¶œë ¥:**

```
=== ë¹„ì¬ë¬´ ì •ë³´ íƒìƒ‰ ===

1. ì‹ ìš© ì—°ì²´ ê´€ë ¨ ë³€ìˆ˜ (42ê°œ):
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(ë¯¸í•´ì œ)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ê°œì›”ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(6ê°œì›”ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   ... ì™¸ 37ê°œ

2. ì™¸ë¶€ê°ì‚¬ ê´€ë ¨ ë³€ìˆ˜ (1ê°œ):
   â€¢ ì™¸ê°êµ¬ë¶„

3. ê¸°ì—… ê·œëª¨ ê´€ë ¨ ë³€ìˆ˜ (14ê°œ):
   â€¢ ë§¤ì¶œì±„ê¶Œ
   â€¢ ë§¤ì¶œì±„ê¶Œ(ì „ê¸°)
   â€¢ ë§¤ì¶œì±„ê¶Œì²˜ë¶„ì†ì‹¤(ë‹¹ê¸°)
   â€¢ ìì‚°ì´ê³„
   â€¢ ìì‚°ì´ê³„(ì „ê¸°)
   ... ì™¸ 9ê°œ

4. ì‹œì  ê´€ë ¨ ë³€ìˆ˜ (19ê°œ):
   â€¢ ê¸°ì¤€ë…„ì›”
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(1ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê³¼ëª©ìˆ˜(ì¼ë³´)(3ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ê¸°ê´€ìˆ˜(ì¼ë³´)(3ë…„ë‚´ìœ ì§€)(ì—°ì²´ì¼ìˆ˜30ì¼ì´ìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(1ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(3ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(5ë…„ë‚´ìœ ì§€)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(1ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(3ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)
   â€¢ ê¸°ì—…ì‹ ìš©ê³µì—¬ì—°ì²´ìµœì¥ì—°ì²´ì¼ìˆ˜(ì¼ë³´)(5ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)
   â€¢ ì‹ ìš©ë„íŒë‹¨ê³µê³µì •ë³´ê±´ìˆ˜(CIS)(5ë…„ë‚´ë°œìƒ)(í•´ì œí¬í•¨)
   â€¢ ê³µê³µì •ë³´(êµ­ì„¸,ì§€ë°©ì„¸,ê´€ì„¸ì²´ë‚©)ê±´ìˆ˜(CIS)(5ë…„ë‚´ë°œìƒ)
   â€¢ ê³µê³µì •ë³´(êµ­ì„¸,ì§€ë°©ì„¸,ê´€ì„¸ì²´ë‚©,ê³ ìš©ì‚°ì¬ì²´ë‚©)ê±´ìˆ˜(CIS)(5ë…„ë‚´ë°œìƒ)
   â€¢ ëª¨í˜•ê°œë°œìš©Performance(í–¥í›„1ë…„ë‚´ë¶€ë„ì—¬ë¶€)
   âœ… ì‹œì  ì •ë³´ í™•ì¸ë¨. ê±°ì‹œê²½ì œ ì§€í‘œ ì—°ê³„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

======================================================================

âœ“ ì´ 76ê°œ ë¹„ì¬ë¬´ ê´€ë ¨ ë³€ìˆ˜ ì‹ë³„ë¨

```

--------------------------------------------------------------------------------

## [ë§ˆí¬ë‹¤ìš´ #10]

## 7. ì¢…í•© ì¸ì‚¬ì´íŠ¸ ë° ë‹¤ìŒ ë‹¨ê³„

### ì£¼ìš” ë°œê²¬ì‚¬í•­

#### 1. ìƒê´€ê´€ê³„ ë¶„ì„
- âœ… ë¶€ë„ ì—¬ë¶€ì™€ ë†’ì€ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§„ ì£¼ìš” ë³€ìˆ˜ ì‹ë³„
- âœ… VIFë¥¼ í†µí•œ ë‹¤ì¤‘ê³µì„ ì„± ì§„ë‹¨ (VIF â‰¥ 10ì¸ ë³€ìˆ˜ ì œê±° í•„ìš”)
- âœ… ëª¨ë¸ë§ ì‹œ ì‚¬ìš©í•  ë³€ìˆ˜ ìš°ì„ ìˆœìœ„ ê²°ì •

#### 2. ë¹„ì„ í˜• ê´€ê³„
- âœ… ì¬ë¬´ ì§€í‘œì™€ ë¶€ë„ìœ¨ì˜ ë¹„ì„ í˜•ì  ê´€ê³„ í™•ì¸
- âœ… ì„ê³„ì (threshold) ì‹ë³„ë¡œ ìœ„í—˜ êµ¬ê°„ íŒŒì•…
- âœ… êµ¬ê°„ë³„ ì°¨ë³„ì  ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì „ëµ ìˆ˜ë¦½ ê°€ëŠ¥

#### 3. ì´ìë³´ìƒë°°ìœ¨
- âœ… **ì¢€ë¹„ ê¸°ì—…**(ICR < 1.0) ì‹ë³„ ë° ë†’ì€ ë¶€ë„ ìœ„í—˜ í™•ì¸
- âœ… ì—…ì¢…ë³„ ì´ìë³´ìƒë°°ìœ¨ ì°¨ì´ ë¶„ì„
- âœ… ì´ìë³´ìƒë°°ìœ¨ì´ ë¶€ë„ ì˜ˆì¸¡ì˜ í•µì‹¬ ì§€í‘œì„ì„ ì¬í™•ì¸

#### 4. í˜„ê¸ˆíë¦„ íŒ¨í„´
- âœ… ê¸°ì—… ìƒì• ì£¼ê¸°ë³„ í˜„ê¸ˆíë¦„ íŒ¨í„´ ë¶„ë¥˜
- âœ… **ì‡ í‡´ê¸° íŒ¨í„´**(OCF-, ICF+, FCF-)ì˜ ë†’ì€ ë¶€ë„ ìœ„í—˜
- âœ… 3ëŒ€ í˜„ê¸ˆíë¦„ í™œë™ì˜ ì¢…í•©ì  ê³ ë ¤ í•„ìš”

#### 5. ë¹„ì¬ë¬´/ê±°ì‹œê²½ì œ
- âœ… ë¹„ì¬ë¬´ ì •ë³´(ì—°ì²´, ì™¸ê° ì—¬ë¶€ ë“±)ì˜ ì˜í–¥ë ¥ í™•ì¸
- âœ… ê±°ì‹œê²½ì œ ì§€í‘œ ì—°ê³„ ê°€ëŠ¥ì„± ê²€í† 

---

### ëª¨ë¸ë§ ì‹œ ê³ ë ¤ì‚¬í•­

#### ë³€ìˆ˜ ì„ íƒ ì „ëµ
1. **ë‹¤ì¤‘ê³µì„ ì„± ì²˜ë¦¬**
   - VIF â‰¥ 10ì¸ ë³€ìˆ˜ ì¤‘ í•˜ë‚˜ë§Œ ì„ íƒ
   - ë˜ëŠ” ì£¼ì„±ë¶„ ë¶„ì„(PCA) ì ìš©

2. **ë³€ìˆ˜ ìš°ì„ ìˆœìœ„**
   - ë¶€ë„ ì—¬ë¶€ì™€ ìƒê´€ê´€ê³„ê°€ ë†’ì€ ë³€ìˆ˜ ìš°ì„ 
   - ë¹„ì¦ˆë‹ˆìŠ¤ í•´ì„ì´ ëª…í™•í•œ ë³€ìˆ˜ ì„ í˜¸

3. **ë¹„ì„ í˜• ë³€í™˜**
   - êµ¬ê°„í™”(binning) ë˜ëŠ” ë‹¤í•­ì‹ ë³€í™˜
   - ë¡œê·¸ ë³€í™˜, ì œê³±ê·¼ ë³€í™˜ ë“±

#### íŒŒìƒ ë³€ìˆ˜ ìƒì„±
- `ICR_ì¹´í…Œê³ ë¦¬`: ì¢€ë¹„/ì£¼ì˜/ì•ˆì •
- `í˜„ê¸ˆíë¦„_íŒ¨í„´`: ë„ì…ê¸°/ì„±ì¥ê¸°/ì„±ìˆ™ê¸°/ì‡ í‡´ê¸°
- ë¹„ì„ í˜• ì„ê³„ê°’ ê¸°ë°˜ ì´ì§„ ë³€ìˆ˜ (ì˜ˆ: `ë¶€ì±„ë¹„ìœ¨_ìœ„í—˜` = ë¶€ì±„ë¹„ìœ¨ > 200%)

#### ë¶ˆê· í˜• ë°ì´í„° ì²˜ë¦¬
- **ì˜¤ë²„ìƒ˜í”Œë§**: SMOTE, ADASYN
- **ì–¸ë”ìƒ˜í”Œë§**: Tomek Links, NearMiss
- **ì•Œê³ ë¦¬ì¦˜ ì¡°ì •**: class_weight, sample_weight
- **ì†ì‹¤í•¨ìˆ˜**: Focal Loss, Weighted Cross-Entropy

---

### ë‹¤ìŒ ë‹¨ê³„

#### 1ï¸âƒ£ íŠ¹ì„± ê³µí•™ (`02_ê³ ê¸‰_ë„ë©”ì¸_íŠ¹ì„±ê³µí•™.ipynb`)
- ì´ ë…¸íŠ¸ë¶ì—ì„œ ë°œê²¬í•œ ì¸ì‚¬ì´íŠ¸ ê¸°ë°˜ íŒŒìƒ ë³€ìˆ˜ ìƒì„±
- ë¹„ì„ í˜• ë³€í™˜, ìƒí˜¸ì‘ìš© ë³€ìˆ˜ ì¶”ê°€
- ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜ ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ ê°œì„ 

#### 2ï¸âƒ£ ìƒê´€ê´€ê³„ ë° ë¦¬ìŠ¤í¬ íŒ¨í„´ ë¶„ì„ (`03_ìƒê´€ê´€ê³„_ë°_ë¦¬ìŠ¤í¬_íŒ¨í„´_ë¶„ì„.ipynb`)
- ë³€ìˆ˜ ê°„ ë³µì¡í•œ ìƒí˜¸ì‘ìš© íŒ¨í„´ ë¶„ì„
- ë¶€ë„ ê¸°ì—… íŠ¹ì„± í”„ë¡œíŒŒì¼ë§
- ì—…ì¢…/ê·œëª¨ë³„ ì„¸ê·¸ë¨¼íŠ¸ ë¶„ì„

#### 3ï¸âƒ£ ë¶ˆê· í˜• ë¶„ë¥˜ ëª¨ë¸ë§ (`04_ë¶ˆê· í˜•_ë¶„ë¥˜_ëª¨ë¸ë§.ipynb`)
- ë¶ˆê· í˜• ë°ì´í„° ì²˜ë¦¬ ê¸°ë²• ì ìš©
- ë‹¤ì–‘í•œ ëª¨ë¸ ë¹„êµ (LightGBM, XGBoost, CatBoost)
- í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ ë° ì•™ìƒë¸”

#### 4ï¸âƒ£ ëª¨ë¸ í‰ê°€ ë° í•´ì„ (`05_ëª¨ë¸_í‰ê°€_ë°_í•´ì„.ipynb`)
- SHAPë¥¼ í†µí•œ ë³€ìˆ˜ ì¤‘ìš”ë„ ë¶„ì„
- ë¶€ë„ ì˜ˆì¸¡ ì£¼ìš” ì¸ì í•´ì„
- ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸ ë„ì¶œ

---

### ê²°ë¡ 

ì´ ë…¸íŠ¸ë¶ì„ í†µí•´:
1. **ì¬ë¬´ ì§€í‘œì˜ ë¹„ì„ í˜•ì  íŠ¹ì„±** í™•ì¸
2. **ì´ìë³´ìƒë°°ìœ¨ê³¼ í˜„ê¸ˆíë¦„ íŒ¨í„´**ì˜ ì¤‘ìš”ì„± ì¬í™•ì¸
3. **ë‹¤ì¤‘ê³µì„ ì„± ë¬¸ì œ** íŒŒì•… ë° í•´ê²° ë°©í–¥ ì œì‹œ
4. **ëª¨ë¸ë§ì„ ìœ„í•œ íŒŒìƒ ë³€ìˆ˜** ìƒì„±

ë‹¤ìŒ ë…¸íŠ¸ë¶ì—ì„œ ì´ëŸ¬í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë” ì •êµí•œ íŠ¹ì„± ê³µí•™ê³¼ ëª¨ë¸ë§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

--------------------------------------------------------------------------------

## [ì½”ë“œ #16]

```python
# ë¶„ì„ ê²°ê³¼ ìš”ì•½
print("="*70)
print("ì‹¬í™” ì¬ë¬´ ë¶„ì„ ì™„ë£Œ")
print("="*70)
print()
print("ğŸ“Š ìƒì„±ëœ ì£¼ìš” ë³€ìˆ˜:")
new_vars = []
if 'ì´ìë³´ìƒë°°ìœ¨_ICR' in df.columns:
    new_vars.append('ì´ìë³´ìƒë°°ìœ¨_ICR')
if 'ICR_ì¹´í…Œê³ ë¦¬' in df.columns:
    new_vars.append('ICR_ì¹´í…Œê³ ë¦¬')
if 'í˜„ê¸ˆíë¦„_íŒ¨í„´' in df.columns:
    new_vars.append('í˜„ê¸ˆíë¦„_íŒ¨í„´')

for var in new_vars:
    n_valid = df[var].notna().sum()
    print(f"  âœ“ {var}: {n_valid:,}ê°œ ìœ íš¨ ë°ì´í„°")

print()
print("ğŸ“ˆ ë‹¤ìŒ ë…¸íŠ¸ë¶:")
print("  â†’ 02_ê³ ê¸‰_ë„ë©”ì¸_íŠ¹ì„±ê³µí•™.ipynb")
print("  â†’ 03_ìƒê´€ê´€ê³„_ë°_ë¦¬ìŠ¤í¬_íŒ¨í„´_ë¶„ì„.ipynb")
print()
print("="*70)
```

**ì¶œë ¥:**

```
======================================================================
ì‹¬í™” ì¬ë¬´ ë¶„ì„ ì™„ë£Œ
======================================================================

ğŸ“Š ìƒì„±ëœ ì£¼ìš” ë³€ìˆ˜:
  âœ“ ì´ìë³´ìƒë°°ìœ¨_ICR: 50,105ê°œ ìœ íš¨ ë°ì´í„°
  âœ“ ICR_ì¹´í…Œê³ ë¦¬: 50,105ê°œ ìœ íš¨ ë°ì´í„°
  âœ“ í˜„ê¸ˆíë¦„_íŒ¨í„´: 50,105ê°œ ìœ íš¨ ë°ì´í„°

ğŸ“ˆ ë‹¤ìŒ ë…¸íŠ¸ë¶:
  â†’ 02_ê³ ê¸‰_ë„ë©”ì¸_íŠ¹ì„±ê³µí•™.ipynb
  â†’ 03_ìƒê´€ê´€ê³„_ë°_ë¦¬ìŠ¤í¬_íŒ¨í„´_ë¶„ì„.ipynb

======================================================================

```

--------------------------------------------------------------------------------



ì´ê³„: ë§ˆí¬ë‹¤ìš´ 10ê°œ, ì½”ë“œ 16ê°œ
