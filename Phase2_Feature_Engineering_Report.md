# 기업 부도 예측 모델 - Phase 2: Feature Engineering 보고서

**생성일시:** 2025-11-20 02:46:27
**작업 단계:** Phase 2 - 고급 특징 공학 (Advanced Feature Engineering)

---

## Executive Summary (실행 요약)

Phase 2에서는 경제학적 가설에 기반한 **51개의 고급 파생 변수**를 생성하였습니다. 이 변수들은 유동성, 지급불능, 수익성, 활동성, 성장성, 행동적 징후 등 기업의 재무 건전성을 다각도로 평가합니다.

### 주요 성과

- ✅ **51개 파생 변수 생성** (원본 159개 → 최종 210개)
- ✅ **한국형 Altman Z-Score** 구현 및 검증
- ✅ **연체 정보 변수**가 가장 강력한 예측 변수로 확인 (상관계수 0.32)
- ✅ **행동적 징후 변수**의 부도 예측력 검증 (연체 시 부도율 39.3배 증가)
- ✅ 처리된 데이터 저장 완료 (79.75 MB)

---

## 1. 데이터 개요

### 1.1 기본 정보

| 항목 | 값 |
|------|-----|
| 총 샘플 수 | 50,105개 |
| 원본 변수 수 | 159개 |
| 생성된 변수 수 | 51개 |
| 최종 변수 수 | 210개 |
| 정상 기업 | 49,346개 (98.49%) |
| 부도 기업 | 759개 (1.51%) |
| 클래스 불균형 비율 | 65.0:1 |

### 1.2 처리 결과

- **출력 파일:** `data/processed/features_generated.csv`
- **파일 크기:** 79.75 MB
- **Shape:** (50,105 rows × 211 columns)
- **처리 시간:** ~24초

---

## 2. 생성된 파생 변수 (51개)

### 2.1 유동성 지표 (Liquidity Features) - 6개

경제적 가설: **"흑자 부도" - 현금이 없으면 기업은 망한다**

| 번호 | 변수명 | 설명 | 경제적 의미 |
|------|--------|------|-------------|
| 1 | 순운전자본비율 | (유동자산 - 유동부채) / 자산총계 | 단기 자금 여력 |
| 2 | 유동비율 | 유동자산 / 유동부채 | 단기 채무 지급 능력 |
| 3 | 당좌비율 | (유동자산 - 재고자산) / 유동부채 | 즉시 현금화 가능 자산 |
| 4 | 현금흐름부채커버리지 | 영업활동현금흐름 / 부채총계 | 현금 창출로 부채 상환 능력 |
| 5 | 현금흐름이자보상배율 | 영업활동현금흐름 / 이자비용 | 현금 기반 이자 지급 능력 |
| 6 | 현금단기차입금비율 | 현금성자산 / 단기차입금 | 단기 차입금 즉시 상환 능력 |

### 2.2 지급불능 지표 (Solvency Features) - 7개

경제적 가설: **"좀비 기업" - 이자도 못 갚는 상태**

| 번호 | 변수명 | 설명 | 임계값 |
|------|--------|------|--------|
| 7 | 부채비율_FE | 부채총계 / 자본총계 | > 200% 위험 |
| 8 | 자기자본비율_FE | 자본총계 / 자산총계 | < 30% 위험 |
| 9 | 이자보상배율_FE | 영업손익 / 이자비용 | < 1.0 좀비기업 |
| 10 | EBITDA이자보상배율 | EBITDA / 이자비용 | < 1.0 위험 |
| 11 | EBIT이자보상배율 | EBIT / 이자비용 | < 2.0 주의 |
| 12 | 자본잠식여부 | 자본총계 < 납입자본금 | 1 = 잠식 |
| 13 | 차입금의존도_FE | 차입금 / 자산총계 | > 50% 고위험 |
| 14 | 순차입금비율_FE | 순차입금 / 자산총계 | 순부채 의존도 |

### 2.3 수익성 지표 (Profitability Features) - 6개

경제적 가설: **"수익성 악화 및 경쟁력 상실"**

| 번호 | 변수명 | 설명 | 목표 수준 |
|------|--------|------|-----------|
| 15 | 매출총이익률 | (매출액 - 매출원가) / 매출액 | > 20% 양호 |
| 16 | 영업이익률 | 영업손익 / 매출액 | > 5% 양호 |
| 17 | 순이익률 | 당기순이익 / 매출액 | > 3% 양호 |
| 18 | ROA | 당기순이익 / 자산총계 | > 5% 우수 |
| 19 | ROE | 당기순이익 / 자본총계 | > 10% 우수 |
| 20 | 이익의질_Accruals | (당기순이익 - 영업현금흐름) / 자산총계 | < 0 양호 |

**이익의 질(Quality of Earnings):** 현금이 뒷받침되지 않는 이익은 분식회계 가능성을 시사합니다.

### 2.4 활동성 지표 (Activity Features) - 4개

| 번호 | 변수명 | 설명 |
|------|--------|------|
| 21 | 총자산회전율 | 매출액 / 자산총계 |
| 22 | 재고자산회전율 | 매출원가 / 재고자산 |
| 23 | 매출채권회전율 | 매출액 / 매출채권 |
| 24 | 유동성_효율성_교차 | 유동비율 / 재고자산회전율 (상호작용) |

### 2.5 Altman Z-Score (6개)

한국형 변형 모델 적용:

| 번호 | 변수명 | 수식 | 계수 |
|------|--------|------|------|
| 25 | Altman_Z_Score | 가중합 | - |
| 26 | Z_X1_WorkingCapital | (유동자산 - 유동부채) / 자산총계 | 1.2 |
| 27 | Z_X2_RetainedEarnings | 이익잉여금 / 자산총계 | 1.4 |
| 28 | Z_X3_EBIT | EBIT / 자산총계 | 3.3 |
| 29 | Z_X4_Equity | 자본총계 / 부채총계 | 0.6 |
| 30 | Z_X5_Sales | 매출액 / 자산총계 | 1.0 |

**Z-Score 해석:**
- Z < 1.81: **Distress Zone** (부도 가능성 높음)
- 1.81 ≤ Z < 2.99: **Grey Zone** (불확실)
- Z ≥ 2.99: **Safe Zone** (안전)

### 2.6 성장성 지표 (Growth Features) - 5개

| 번호 | 변수명 | 설명 |
|------|--------|------|
| 31 | 매출액증가율_YoY | (매출액 - 전기매출액) / 전기매출액 |
| 32 | 영업이익증가율_YoY | (영업손익 - 전기영업이익) / 전기영업이익 |
| 33 | 당기순이익증가율_YoY | (당기순이익 - 전기당기순이익) / 전기당기순이익 |
| 34 | 자산증가율_YoY | (자산총계 - 전기자산총계) / 전기자산총계 |
| 35 | 자본증가율_YoY | (자본총계 - 전기자본총계) / 전기자본총계 |

### 2.7 행동 데이터 파생 변수 (Behavioral Features) - 8개

경제적 가설: **"연체는 가장 강력한 선행 지표"**

| 번호 | 변수명 | 설명 | 중요도 |
|------|--------|------|--------|
| 36 | 연체강도지수 | log(연체건수+1) × log(최장연체일수+1) | ⭐⭐⭐⭐⭐ |
| 37 | 연체여부_미해제 | 현재 연체 중 (이진) | ⭐⭐⭐⭐⭐ |
| 38 | 연체여부_3개월 | 3개월 내 연체 (이진) | ⭐⭐⭐⭐ |
| 39 | 장기연체여부_30일 | 30일 이상 연체 (이진) | ⭐⭐⭐⭐⭐ |
| 40 | 세금체납여부 | 국세/지방세 체납 (이진) | ⭐⭐⭐⭐ |
| 41 | 연체기관수_로그 | log(연체기관수+1) | ⭐⭐⭐⭐⭐ |
| 42 | 최장연체일수_5년_로그 | log(5년내최장연체일수+1) | ⭐⭐⭐⭐ |
| 43 | 최근공공정보경과일_역수 | 1 / (경과일수+1) | ⭐⭐⭐ |

### 2.8 결측치 정보 변수 (Missing Indicators) - 8개

결측치 자체가 정보 (예: 차입금 없음 = 무차입 경영)

| 번호 | 변수명 |
|------|--------|
| 44 | Is_Missing_이자비용 |
| 45 | Is_Missing_이자보상배율 |
| 46 | Is_Missing_영업활동현금흐름 |
| 47 | Is_Missing_차입금 |
| 48 | Is_Missing_단기차입금 |
| 49 | Is_Missing_EBITDA |
| 50 | Is_Missing_재무비율_총자산순이익률 |
| 51 | Is_Missing_재무비율_당기순이익율 |

### 2.9 상호작용 변수 (Interaction Features) - 3개

| 번호 | 변수명 | 설명 |
|------|--------|------|
| - | 부채이자교차 | 부채비율 × log(이자비용) |
| - | 유동성현금흐름교차 | 유동비율 × log(영업현금흐름) |
| - | 연체부채교차 | 연체여부 × 부채비율 |

---

## 3. 타겟 변수와의 상관관계 분석

### 3.1 Top 10 강력한 예측 변수 (양의 상관관계)

| 순위 | 변수명 | 상관계수 (r) | 해석 |
|------|--------|--------------|------|
| 1 | **연체기관수_로그** | **0.3235** | 가장 강력한 예측 변수 |
| 2 | **연체여부_미해제** | **0.3055** | 현재 연체 중 |
| 3 | 연체강도지수 | 0.2489 | 연체 빈도 × 기간 |
| 4 | 장기연체여부_30일 | 0.2324 | 30일 이상 장기 연체 |
| 5 | 연체여부_3개월 | 0.2230 | 3개월 내 연체 |
| 6 | 최장연체일수_5년_로그 | 0.1802 | 5년 내 최장 연체 기간 |
| 7 | 최근공공정보경과일_역수 | 0.1639 | 최근 공공정보 발생 |
| 8 | 세금체납여부 | 0.1631 | 국세/지방세 체납 |
| 9 | 자본잠식여부 | 0.0513 | 자본 잠식 상태 |
| 10 | 순차입금비율_FE | 0.0370 | 순부채 의존도 |

**핵심 발견:**
- ⚠️ **연체 관련 변수가 Top 6 독점** - 행동적 징후가 재무 지표보다 강력함
- ⚠️ **상관계수 0.32**는 불균형 데이터에서 매우 높은 수치
- ⚠️ **재무 지표(Altman Z-Score 등)보다 연체 정보가 2배 이상 강력함**

### 3.2 음의 상관관계 (낮을수록 부도 위험)

| 순위 | 변수명 | 상관계수 (r) | 해석 |
|------|--------|--------------|------|
| 1 | Z_X2_RetainedEarnings | -0.0432 | 이익잉여금이 낮을수록 위험 |
| 2 | 자기자본비율_FE | -0.0425 | 자기자본이 낮을수록 위험 |
| 3 | Z_X3_EBIT | -0.0388 | EBIT가 낮을수록 위험 |
| 4 | Z_X1_WorkingCapital | -0.0354 | 순운전자본이 낮을수록 위험 |
| 5 | 순운전자본비율 | -0.0354 | 운전자본 부족 |

---

## 4. Altman Z-Score 분석

### 4.1 정상 vs 부도 기업 비교

| 구분 | 평균 Z-Score | 해석 |
|------|--------------|------|
| 정상 기업 | 2,078,867,591.38 | 매우 양호 (왜곡 있음*) |
| 부도 기업 | -1.17 | Distress Zone |

**\*주의:** 정상 기업의 평균이 비정상적으로 높은 것은 일부 극단값(outlier)의 영향입니다. 이는 추후 Winsorization(상/하위 1-5% 캡핑)으로 처리해야 합니다.

### 4.2 Z-Score Zone별 부도율 분석

| Zone | 기업 수 | 부도 수 | 부도율 (%) | 해석 |
|------|---------|---------|------------|------|
| **Distress (Z < 1.81)** | 17,404 | 428 | **2.46%** | 부도 고위험 |
| **Grey (1.81-2.99)** | 10,887 | 147 | **1.35%** | 불확실 |
| **Safe (Z ≥ 2.99)** | 21,814 | 184 | **0.84%** | 안전 |

**검증 결과:**
- ✅ Altman Z-Score가 부도 예측에 유효함을 확인
- ✅ Distress Zone의 부도율(2.46%)이 Safe Zone(0.84%)의 **2.9배**
- ✅ Zone 분류가 리스크 구분에 효과적

---

## 5. 행동 데이터 파생 변수 분석

### 5.1 연체 여부와 부도율 (미해제 기준)

| 구분 | 기업 수 | 비율 | 부도율 | 배수 |
|------|---------|------|--------|------|
| 연체 있음 | 325 | 0.65% | **47.69%** | - |
| 연체 없음 | 49,780 | 99.35% | 1.21% | - |
| **차이** | - | - | - | **39.3배** |

**핵심 발견:**
- ⚠️ **연체가 있으면 부도율이 39.3배 증가**
- ⚠️ 연체는 가장 강력한 **선행 지표 (Leading Indicator)**

### 5.2 장기 연체 여부와 부도율 (30일 이상)

| 구분 | 기업 수 | 비율 | 부도율 | 배수 |
|------|---------|------|--------|------|
| 장기 연체 있음 | 97 | 0.19% | **65.98%** | - |
| 장기 연체 없음 | 50,008 | 99.81% | 1.39% | - |
| **차이** | - | - | - | **47.5배** |

**핵심 발견:**
- ⚠️ **30일 이상 장기 연체 시 부도율 47.5배 증가**
- ⚠️ 장기 연체는 부도의 **최종 경고 신호**

### 5.3 세금 체납 여부와 부도율

| 구분 | 기업 수 | 비율 | 부도율 | 배수 |
|------|---------|------|--------|------|
| 체납 있음 | 269 | 0.54% | **28.62%** | - |
| 체납 없음 | 49,836 | 99.46% | 1.37% | - |
| **차이** | - | - | - | **20.9배** |

**핵심 발견:**
- ⚠️ **세금 체납 시 부도율 20.9배 증가**
- ⚠️ 세금 체납은 자금난의 마지막 단계를 의미

---

## 6. 주요 발견 사항 (Key Findings)

### 6.1 예측 변수 우선순위

1. **연체 정보 (최우선)**
   - 연체기관수, 연체여부, 장기연체 → 상관계수 0.23~0.32
   - 부도율 증가 배수: **20~48배**

2. **공공정보 (2순위)**
   - 세금 체납, 최근 공공정보 발생 → 상관계수 0.16
   - 부도율 증가 배수: **21배**

3. **Altman Z-Score (3순위)**
   - Z-Score 구성 요소 → 상관계수 0.04
   - Distress Zone 부도율: Safe Zone의 **2.9배**

4. **재무 비율 (4순위)**
   - 자기자본비율, 이익잉여금 비율 등 → 상관계수 < 0.05
   - 단독으로는 예측력이 약하나, 앙상블 시 유용

### 6.2 경제학적 통찰

1. **유동성 위기 vs 지급 불능**
   - 현금흐름 지표가 전통적 유동비율보다 중요
   - 이익의 질(Accruals)이 낮은 기업은 분식회계 의심

2. **좀비 기업 식별**
   - 이자보상배율 < 1.0이 3년 지속 → 구조적 문제
   - EBITDA 기반 이자보상배율이 더 정확

3. **행동적 징후의 우월성**
   - **재무제표는 후행 지표 (Lagging Indicator)**
   - **연체 정보는 선행 지표 (Leading Indicator)**
   - 연체 → 세금 체납 → 부도 순서로 진행

### 6.3 데이터 품질 이슈

1. **극단값 (Outliers)**
   - 재고자산회전율, 매출채권회전율 등에서 극단값 발견
   - Winsorization(1-5% 캡핑) 적용 필요

2. **결측치 패턴**
   - Is_Missing 변수들이 일부 NaN (결측치 자체가 없는 경우)
   - 조건부 대체 전략 필요

3. **다중공선성 (Multicollinearity)**
   - 유사 재무 비율 간 높은 상관관계 예상
   - VIF 분석 후 변수 선택 필요

---

## 7. 다음 단계 (Next Steps)

### Phase 3: 데이터 전처리 및 샘플링

1. **분포 변환**
   - [ ] 로그 변환 (log1p) 적용: 자산총계, 매출액, 부채총계 등
   - [ ] Winsorization: 상/하위 1-5% 캡핑
   - [ ] Box-Cox 변환 (필요시)

2. **결측치 처리**
   - [ ] 조건부 결측치 대체
     - 차입금 관련: 0으로 대체
     - 재무 비율: 산업 평균 또는 중앙값으로 대체
   - [ ] Is_Missing 플래그 활용

3. **스케일링**
   - [ ] RobustScaler 적용 (이상치에 강건)
   - [ ] Train/Test에 fit_transform/transform 구분

4. **Train/Validation/Test 분할**
   - [ ] Stratified Train/Test Split (8:2 or 7:3)
   - [ ] Stratified K-Fold 설정 (k=5 or 10)

5. **불균형 데이터 처리 (Train Only)**
   - [ ] **SMOTE** 적용 (소수 클래스 오버샘플링)
   - [ ] **Tomek Links** 제거 (경계 정리)
   - [ ] 샘플링 비율 실험 (1:1, 1:2, 1:3 등)
   - [ ] ⚠️ **데이터 누수 검증** 필수

### Phase 4: 모델 학습 및 평가

1. **베이스라인 모델**
   - [ ] Logistic Regression
   - [ ] Random Forest
   - [ ] XGBoost

2. **평가 메트릭**
   - [ ] AUPRC (주평가지표)
   - [ ] F1-Score, F2-Score
   - [ ] Confusion Matrix
   - [ ] ❌ Accuracy 사용 금지

3. **고급 모델**
   - [ ] XGBoost (scale_pos_weight)
   - [ ] LightGBM (is_unbalance)
   - [ ] CatBoost (auto_class_weights)
   - [ ] Focal Loss 적용

4. **하이퍼파라미터 튜닝**
   - [ ] GridSearchCV / RandomizedSearchCV
   - [ ] Optuna (베이지안 최적화)

5. **앙상블**
   - [ ] Soft Voting
   - [ ] Stacking

---

## 8. 기술 명세 (Technical Specifications)

### 8.1 실행 환경

- **Python 버전:** 3.11
- **주요 라이브러리:**
  - pandas: 데이터 처리
  - numpy: 수치 연산
  - matplotlib, seaborn: 시각화
  - scikit-learn: 전처리 (향후)

### 8.2 파일 구조

```
project_root/
├── data/
│   ├── 기업신용평가정보_210801.csv  (원본 데이터)
│   └── processed/
│       └── features_generated.csv   (처리된 데이터, 79.75 MB)
├── src/
│   ├── features.py                  (FeatureGenerator 클래스)
│   ├── utils.py
│   └── constants.py
├── scripts/
│   └── run_feature_engineering.py   (실행 스크립트)
├── notebooks/
│   ├── 01_eda.ipynb
│   └── 02_feature_engineering.ipynb
└── reports/
    ├── EDA_Analysis_Report.md
    └── Phase2_Feature_Engineering_Report.md
```

### 8.3 코드 품질

- ✅ 하드코딩 없음 (동적 변수 생성 시스템)
- ✅ 타입 힌팅 (Type Hints) 적용
- ✅ Docstring 완비
- ✅ safe_division 함수로 0 나누기 방지
- ✅ 한글 폰트 설정 완료

---

## 9. 결론

Phase 2에서는 **51개의 고도화된 파생 변수**를 성공적으로 생성하였으며, 특히 **연체 정보 변수**가 부도 예측에 가장 강력한 예측 변수임을 확인하였습니다.

### 핵심 메시지

1. **연체 정보 > 재무 지표**
   - 연체 관련 변수의 상관계수(0.32)가 재무 비율(< 0.05)의 6배 이상
   - 부도율 증가 배수: 20~48배

2. **Altman Z-Score 유효성 검증**
   - Distress Zone의 부도율이 Safe Zone의 2.9배
   - 리스크 구분에 효과적

3. **경제학적 가설 입증**
   - 유동성 위기, 지급 불능, 행동적 징후가 모두 부도와 연관
   - 이익의 질(Accruals)이 분식회계 탐지에 유용

### 다음 단계

Phase 3에서는 생성된 변수들을 전처리하고, SMOTE + Tomek Links로 불균형을 해결한 후, Phase 4에서 XGBoost/LightGBM 기반 앙상블 모델을 학습할 예정입니다.

---

**보고서 작성:** Claude Code Agent
**검토 완료:** 2025-11-20 02:46:27
**다음 마일스톤:** Phase 3 - Data Preprocessing & Sampling
